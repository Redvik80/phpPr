!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}({2:function(e,t,r){e.exports=r.p+"onlineTV.css"},8:function(e,t,r){"use strict";r.r(t);r(2);new(function(){function e(){var e=this;this.htmlPlayer=document.getElementById("html-player"),this.playerHeader=document.getElementById("player-header"),this.noSignalImg=document.getElementById("no-signal-img"),this.ytPlayerLoaded=!1,fetch("/api/scheldule/getCurrentSchelduleData.php").then((function(e){return e.json()})).then((function(t){e.currentProgram=t.currentProgram,e.nextProgram=t.nextProgram,e.ytPlayerLoaded&&e.play()})),this.createYtPlayer(),this.createHtmlPlayer()}return e.prototype.createHtmlPlayer=function(){var e=this;this.htmlPlayer.addEventListener("ended",(function(){e.next()})),this.htmlPlayer.addEventListener("playing",(function(){e.htmlPlayer.muted=!1,e.htmlPlayer.controls=!0}))},e.prototype.createYtPlayer=function(){var e=this;window.onYouTubeIframeAPIReady=function(){e.ytPlayer=new YT.Player("yt-player",{videoId:"",playerVars:{color:"white",disablekb:1,enablejsapi:1,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0},events:{onReady:function(){e.ytPlayerLoaded=!0,e.play()},onStateChange:function(t){0===t.data&&e.next()}}})}},e.prototype.next=function(){var e=this;+new Date>=this.currentProgram.endTime.timestamp&&(this.currentProgram=this.nextProgram,this.nextProgram=null,fetch("/api/scheldule/getCurrentSchelduleData.php").then((function(e){return e.json()})).then((function(t){var r=!e.currentProgram||t.currentProgram||e.currentProgram.program.id!==t.currentProgram.program.id;e.currentProgram=t.currentProgram,e.nextProgram=t.nextProgram,r?e.play():e.nextProgram&&(e.playerHeader.innerHTML+="<br><b>Далее: </b>"+e.nextProgram.program.name)}))),this.play()},e.prototype.play=function(){if(this.currentProgram){this.noSignalImg.style.display="none";var e=Math.floor(+new Date/1e3)-this.currentProgram.startTime.timestamp;this.currentProgram.program.from_youtube?(this.htmlPlayer.pause(),this.htmlPlayer.style.display="none",this.ytPlayer.getIframe().style.display="block",this.ytPlayer.loadVideoById(this.currentProgram.program.youtube_id,e)):(this.ytPlayer.pauseVideo(),this.ytPlayer.getIframe().style.display="none",this.htmlPlayer.style.display="block",this.htmlPlayer.src="/files/videos/"+this.currentProgram.program.file_name,this.htmlPlayer.currentTime=e,this.htmlPlayer.play()),this.playerHeader.innerHTML="<b>Сейчас в эфире: </b>"+this.currentProgram.program.name,this.nextProgram&&(this.playerHeader.innerHTML+="<br><b>Далее: </b>"+this.nextProgram.program.name)}else this.htmlPlayer.pause(),this.ytPlayer.pauseVideo(),this.htmlPlayer.style.display="none",this.ytPlayer.getIframe().style.display="none",this.playerHeader.innerHTML="",this.noSignalImg.style.display="block"},e}())}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcGFnZXMvb25saW5lVFYvb25saW5lVFYuc2NzcyIsIndlYnBhY2s6Ly8vLi9wYWdlcy9vbmxpbmVUVi9vbmxpbmVUVi50cyIsIndlYnBhY2s6Ly8vLi9wYWdlcy9nbG9iYWwudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJodG1sUGxheWVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBsYXllckhlYWRlciIsIm5vU2lnbmFsSW1nIiwieXRQbGF5ZXJMb2FkZWQiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwiZGF0YSIsImN1cnJlbnRQcm9ncmFtIiwibmV4dFByb2dyYW0iLCJwbGF5IiwidGhpcyIsImNyZWF0ZVl0UGxheWVyIiwiY3JlYXRlSHRtbFBsYXllciIsImFkZEV2ZW50TGlzdGVuZXIiLCJuZXh0IiwibXV0ZWQiLCJjb250cm9scyIsIndpbmRvdyIsIm9uWW91VHViZUlmcmFtZUFQSVJlYWR5IiwieXRQbGF5ZXIiLCJZVCIsIlBsYXllciIsInZpZGVvSWQiLCJwbGF5ZXJWYXJzIiwiY29sb3IiLCJkaXNhYmxla2IiLCJlbmFibGVqc2FwaSIsIml2X2xvYWRfcG9saWN5IiwibW9kZXN0YnJhbmRpbmciLCJyZWwiLCJzaG93aW5mbyIsImV2ZW50cyIsIm9uUmVhZHkiLCJvblN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJEYXRlIiwiZW5kVGltZSIsInRpbWVzdGFtcCIsInByb2dyYW1PdXRkYXRlZCIsInByb2dyYW0iLCJpZCIsImlubmVySFRNTCIsInN0eWxlIiwiZGlzcGxheSIsInN0YXJ0U2Vjb25kcyIsIk1hdGgiLCJmbG9vciIsInN0YXJ0VGltZSIsImZyb21feW91dHViZSIsInBhdXNlIiwiZ2V0SWZyYW1lIiwibG9hZFZpZGVvQnlJZCIsInlvdXR1YmVfaWQiLCJwYXVzZVZpZGVvIiwic3JjIiwiZmlsZV9uYW1lIiwiY3VycmVudFRpbWUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElB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S0gsZUFBZ0IsQ0FDckJHLEtBQUtWLFlBQVkwQyxNQUFNQyxRQUFVLE9BQ2pDLElBQU1DLEVBQWVDLEtBQUtDLE9BQU8sSUFBS1gsS0FBUSxLQUFRekIsS0FBS0gsZUFBZXdDLFVBQVVWLFVBQ2hGM0IsS0FBS0gsZUFBZWdDLFFBQVFTLGNBQzVCdEMsS0FBS2QsV0FBV3FELFFBQ2hCdkMsS0FBS2QsV0FBVzhDLE1BQU1DLFFBQVUsT0FDaENqQyxLQUFLUyxTQUFTK0IsWUFBWVIsTUFBTUMsUUFBVSxRQUMxQ2pDLEtBQUtTLFNBQVNnQyxjQUFjekMsS0FBS0gsZUFBZWdDLFFBQVFhLFdBQVlSLEtBRXBFbEMsS0FBS1MsU0FBU2tDLGFBQ2QzQyxLQUFLUyxTQUFTK0IsWUFBWVIsTUFBTUMsUUFBVSxPQUMxQ2pDLEtBQUtkLFdBQVc4QyxNQUFNQyxRQUFVLFFBQ2hDakMsS0FBS2QsV0FBVzBELElDekdILGlCRHlHeUI1QyxLQUFLSCxlQUFlZ0MsUUFBUWdCLFVBQ2xFN0MsS0FBS2QsV0FBVzRELFlBQWNaLEVBQzlCbEMsS0FBS2QsV0FBV2EsUUFFcEJDLEtBQUtYLGFBQWEwQyxVQUFZLDBCQUE0Qi9CLEtBQUtILGVBQWVnQyxRQUFRcEUsS0FDbEZ1QyxLQUFLRixjQUNMRSxLQUFLWCxhQUFhMEMsV0FBYSxxQkFBdUIvQixLQUFLRixZQUFZK0IsUUFBUXBFLFdBR25GdUMsS0FBS2QsV0FBV3FELFFBQ2hCdkMsS0FBS1MsU0FBU2tDLGFBQ2QzQyxLQUFLZCxXQUFXOEMsTUFBTUMsUUFBVSxPQUNoQ2pDLEtBQUtTLFNBQVMrQixZQUFZUixNQUFNQyxRQUFVLE9BQzFDakMsS0FBS1gsYUFBYTBDLFVBQVksR0FDOUIvQixLQUFLVixZQUFZMEMsTUFBTUMsUUFBVSxTQUc3QyxFQWpIQSIsImZpbGUiOiJvbmxpbmVUVi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA4KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIm9ubGluZVRWLmNzc1wiOyIsImltcG9ydCBcIi4vb25saW5lVFYuc2Nzc1wiO1xuaW1wb3J0IHsgdmlkZW9zU3JjUm9vdCB9IGZyb20gXCIuLi9nbG9iYWxcIjtcblxuZGVjbGFyZSB2YXIgWVQ7XG5cbmZ1bmN0aW9uIG9uWW91VHViZUlmcmFtZUFQSVJlYWR5KCkge1xuXG59XG5cbmNsYXNzIE9ubGluZVR2UGFnZSB7XG4gICAgY3VycmVudFByb2dyYW06IFNjaGVsZHVsZUl0ZW07XG4gICAgbmV4dFByb2dyYW06IFNjaGVsZHVsZUl0ZW07XG5cbiAgICB5dFBsYXllcjtcbiAgICBodG1sUGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJodG1sLXBsYXllclwiKSBhcyBIVE1MVmlkZW9FbGVtZW50O1xuICAgIHBsYXllckhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyLWhlYWRlclwiKSBhcyBIVE1MRWxlbWVudDtcbiAgICBub1NpZ25hbEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibm8tc2lnbmFsLWltZ1wiKSBhcyBIVE1MRWxlbWVudDtcblxuICAgIHl0UGxheWVyTG9hZGVkID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgZmV0Y2goXCIvYXBpL3NjaGVsZHVsZS9nZXRDdXJyZW50U2NoZWxkdWxlRGF0YS5waHBcIikudGhlbigocmVzOiBSZXNwb25zZSkgPT4gcmVzLmpzb24oKSkudGhlbihcbiAgICAgICAgICAgIChkYXRhOiB7IGN1cnJlbnRQcm9ncmFtOiBTY2hlbGR1bGVJdGVtLCBuZXh0UHJvZ3JhbTogU2NoZWxkdWxlSXRlbSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJvZ3JhbSA9IGRhdGEuY3VycmVudFByb2dyYW07XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0UHJvZ3JhbSA9IGRhdGEubmV4dFByb2dyYW07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueXRQbGF5ZXJMb2FkZWQpIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlWXRQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVIdG1sUGxheWVyKCk7XG4gICAgfVxuXG4gICAgY3JlYXRlSHRtbFBsYXllcigpIHtcbiAgICAgICAgdGhpcy5odG1sUGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaHRtbFBsYXllci5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmh0bWxQbGF5ZXIubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaHRtbFBsYXllci5jb250cm9scyA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNyZWF0ZVl0UGxheWVyKCkge1xuICAgICAgICAod2luZG93IGFzIGFueSkub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnl0UGxheWVyID0gbmV3IFlULlBsYXllcihcInl0LXBsYXllclwiLCB7XG4gICAgICAgICAgICAgICAgdmlkZW9JZDogXCJcIixcbiAgICAgICAgICAgICAgICBwbGF5ZXJWYXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29udHJvbHM6IDAsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVrYjogMSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlanNhcGk6IDEsXG4gICAgICAgICAgICAgICAgICAgIGl2X2xvYWRfcG9saWN5OiAzLFxuICAgICAgICAgICAgICAgICAgICBtb2Rlc3RicmFuZGluZzogMSxcbiAgICAgICAgICAgICAgICAgICAgcmVsOiAwLFxuICAgICAgICAgICAgICAgICAgICBzaG93aW5mbzogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgIG9uUmVhZHk6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueXRQbGF5ZXJMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uU3RhdGVDaGFuZ2U6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV4dCgpIHtcbiAgICAgICAgaWYgKCsobmV3IERhdGUpID49IHRoaXMuY3VycmVudFByb2dyYW0uZW5kVGltZS50aW1lc3RhbXApIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFByb2dyYW0gPSB0aGlzLm5leHRQcm9ncmFtO1xuICAgICAgICAgICAgdGhpcy5uZXh0UHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICBmZXRjaChcIi9hcGkvc2NoZWxkdWxlL2dldEN1cnJlbnRTY2hlbGR1bGVEYXRhLnBocFwiKS50aGVuKChyZXM6IFJlc3BvbnNlKSA9PiByZXMuanNvbigpKS50aGVuKFxuICAgICAgICAgICAgICAgIChkYXRhOiB7IGN1cnJlbnRQcm9ncmFtOiBTY2hlbGR1bGVJdGVtLCBuZXh0UHJvZ3JhbTogU2NoZWxkdWxlSXRlbSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9ncmFtT3V0ZGF0ZWQgPSAhdGhpcy5jdXJyZW50UHJvZ3JhbSB8fCBkYXRhLmN1cnJlbnRQcm9ncmFtIHx8IHRoaXMuY3VycmVudFByb2dyYW0ucHJvZ3JhbS5pZCAhPT0gZGF0YS5jdXJyZW50UHJvZ3JhbS5wcm9ncmFtLmlkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQcm9ncmFtID0gZGF0YS5jdXJyZW50UHJvZ3JhbTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0UHJvZ3JhbSA9IGRhdGEubmV4dFByb2dyYW07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmFtT3V0ZGF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubmV4dFByb2dyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVySGVhZGVyLmlubmVySFRNTCArPSBcIjxicj48Yj7QlNCw0LvQtdC1OiA8L2I+XCIgKyB0aGlzLm5leHRQcm9ncmFtLnByb2dyYW0ubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgfVxuXG4gICAgcGxheSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFByb2dyYW0pIHtcbiAgICAgICAgICAgIHRoaXMubm9TaWduYWxJbWcuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRTZWNvbmRzID0gTWF0aC5mbG9vcigrKG5ldyBEYXRlKSAvIDEwMDApIC0gdGhpcy5jdXJyZW50UHJvZ3JhbS5zdGFydFRpbWUudGltZXN0YW1wO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFByb2dyYW0ucHJvZ3JhbS5mcm9tX3lvdXR1YmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWxQbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWxQbGF5ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHRoaXMueXRQbGF5ZXIuZ2V0SWZyYW1lKCkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnl0UGxheWVyLmxvYWRWaWRlb0J5SWQodGhpcy5jdXJyZW50UHJvZ3JhbS5wcm9ncmFtLnlvdXR1YmVfaWQsIHN0YXJ0U2Vjb25kcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMueXRQbGF5ZXIucGF1c2VWaWRlbygpO1xuICAgICAgICAgICAgICAgIHRoaXMueXRQbGF5ZXIuZ2V0SWZyYW1lKCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHRoaXMuaHRtbFBsYXllci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIHRoaXMuaHRtbFBsYXllci5zcmMgPSB2aWRlb3NTcmNSb290ICsgdGhpcy5jdXJyZW50UHJvZ3JhbS5wcm9ncmFtLmZpbGVfbmFtZTtcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWxQbGF5ZXIuY3VycmVudFRpbWUgPSBzdGFydFNlY29uZHM7XG4gICAgICAgICAgICAgICAgdGhpcy5odG1sUGxheWVyLnBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGxheWVySGVhZGVyLmlubmVySFRNTCA9IFwiPGI+0KHQtdC50YfQsNGBINCyINGN0YTQuNGA0LU6IDwvYj5cIiArIHRoaXMuY3VycmVudFByb2dyYW0ucHJvZ3JhbS5uYW1lO1xuICAgICAgICAgICAgaWYgKHRoaXMubmV4dFByb2dyYW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllckhlYWRlci5pbm5lckhUTUwgKz0gXCI8YnI+PGI+0JTQsNC70LXQtTogPC9iPlwiICsgdGhpcy5uZXh0UHJvZ3JhbS5wcm9ncmFtLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmh0bWxQbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMueXRQbGF5ZXIucGF1c2VWaWRlbygpO1xuICAgICAgICAgICAgdGhpcy5odG1sUGxheWVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHRoaXMueXRQbGF5ZXIuZ2V0SWZyYW1lKCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJIZWFkZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMubm9TaWduYWxJbWcuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubmV3IE9ubGluZVR2UGFnZSgpO1xuXG5cbmludGVyZmFjZSBQcm9ncmFtIHtcbiAgICBpZDogbnVtYmVyO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkdXJhdGlvbjogbnVtYmVyO1xuICAgIGZpbGVfbmFtZTogc3RyaW5nO1xuICAgIHlvdXR1YmVfaWQ6IHN0cmluZztcbiAgICBmcm9tX3lvdXR1YmU6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBTY2hlbGR1bGVJdGVtIHtcbiAgICBwcm9ncmFtOiBQcm9ncmFtO1xuICAgIHN0YXJ0VGltZToge1xuICAgICAgICB0aW1lc3RhbXA6IG51bWJlcixcbiAgICAgICAgaG91cnM6IG51bWJlcixcbiAgICAgICAgbWludXRlczogbnVtYmVyLFxuICAgICAgICBzZWNvbmRzOiBudW1iZXJcbiAgICB9O1xuICAgIGVuZFRpbWU6IHtcbiAgICAgICAgdGltZXN0YW1wOiBudW1iZXIsXG4gICAgICAgIGhvdXJzOiBudW1iZXIsXG4gICAgICAgIG1pbnV0ZXM6IG51bWJlcixcbiAgICAgICAgc2Vjb25kczogbnVtYmVyXG4gICAgfVxufSIsImV4cG9ydCBjb25zdCB2aWRlb3NTcmNSb290ID0gXCIvZmlsZXMvdmlkZW9zL1wiOyJdLCJzb3VyY2VSb290IjoiIn0=