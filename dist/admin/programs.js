!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=9)}({10:function(e,n,t){e.exports=t.p+"admin/programs.css"},11:function(e,n){var t=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,l){function i(e){try{o(r.next(e))}catch(e){l(e)}}function c(e){try{o(r.throw(e))}catch(e){l(e)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}o((r=r.apply(e,n||[])).next())}))},r=this&&this.__generator||function(e,n){var t,r,a,l,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e],r=0}finally{t=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},a=document.getElementsByClassName("programs-crud-component")[0],l=a.querySelector(".table__btn._add"),i=a.getElementsByClassName("table__body")[0],c=i.getElementsByClassName("table__row"),o=[];function u(e){return{id:e.querySelector(".table__cell._id .table__cell-value"),nameValue:e.querySelector(".table__cell._name .table__cell-value"),nameChangeElem:e.querySelector(".table__cell._name .table__cell-change-elem"),durationValue:e.querySelector(".table__cell._duration .table__cell-value"),durationChangeElemHours:e.querySelector(".table__cell._duration .table__cell-change-elem._hours"),durationChangeElemMins:e.querySelector(".table__cell._duration .table__cell-change-elem._mins"),btnChange:e.querySelector(".table__btn._change"),btnDelete:e.querySelector(".table__btn._delete"),btnSave:e.querySelector(".table__btn._save"),btnCancel:e.querySelector(".table__btn._cancel")}}function s(e){return e.parentElement.parentElement}function d(e){var n=u(e);n.btnChange.addEventListener("click",f),n.btnCancel.addEventListener("click",m),n.btnDelete.addEventListener("click",v),n.btnSave.addEventListener("click",h)}function _(e){var n=Math.floor(e/36e5),t=Math.floor((e-36e5*n)/6e4);return{hours:n,mins:t,str:(n>0?n+"ч. ":"")+(t>0||0===n?t+"мин.":"")}}function b(e){var n=_(e.duration);return'<div class="table__row">\n        <div class="table__content-cells-container">\n            <div class="table__cell _id">\n                <div class="table__cell-value">'+(e.id||"")+'</div>\n            </div>\n            <div class="table__cell _name">\n                <div class="table__cell-value">'+e.name+'</div>\n                <input class="table__cell-change-elem" maxlength="200" name="name" value="'+e.name+'">\n            </div>\n            <div class="table__cell _duration">\n                <div class="table__cell-value">'+n.str+'</div>\n                <div class="table__cell-change-elem-container">\n                    <input class="table__cell-change-elem _hours" type="number" min="0" max="24" value="'+n.hours+'">ч.\n                    <input class="table__cell-change-elem _mins" type="number" min="0" max="59" value="'+n.mins+'">мин.\n                </div>\n            </div>\n        </div>\n        <div class="table__cell _btns">\n            <button class="pi pi-pencil table__btn _change"></button>\n            <button class="pi pi-trash table__btn _delete"></button>\n            <button class="pi pi-save table__btn _save"></button>\n            <button class="pi pi-times table__btn _cancel"></button>\n        </div>\n    </div>'}function f(e){s(e.currentTarget).classList.add("_changed")}function m(e){var n=s(e.currentTarget),t=u(n);if(t.id.innerText){n.classList.remove("_changed");var r=o.find((function(e){return e.id+""===t.id.innerText})),a=_(r.duration);t.nameChangeElem.value=r.name,t.durationChangeElemHours.value=a.hours+"",t.durationChangeElemMins.value=a.mins+""}else n.parentElement.removeChild(n)}function v(e){return t(this,void 0,void 0,(function(){var n,t;return r(this,(function(r){switch(r.label){case 0:return confirm("Хорошо подумали?")?(n=s(e.currentTarget),t=u(n),[4,fetch("/api/program/delete.php?id="+t.id.innerText,{method:"delete"})]):[2];case 1:return r.sent(),o=o.filter((function(e){return e.id+""!==t.id.innerText})),n.parentElement.removeChild(n),[2]}}))}))}function h(e){return t(this,void 0,void 0,(function(){var n,t,a,l,i,c,d;return r(this,(function(r){switch(r.label){case 0:return n=s(e.currentTarget),t=u(n),a=36e5*+t.durationChangeElemHours.value+6e4*+t.durationChangeElemMins.value,t.id.innerText?(l={id:+t.id.innerText,name:t.nameChangeElem.value,duration:a},[4,fetch("/api/program/change.php",{method:"put",body:JSON.stringify(l)})]):[3,2];case 1:return r.sent(),o=o.map((function(e){return e.id===l.id?l:e})),[3,5];case 2:return i={id:null,name:t.nameChangeElem.value,duration:a},c=i,[4,fetch("/api/program/add.php",{method:"post",body:JSON.stringify(i)})];case 3:return[4,r.sent().json()];case 4:c.id=r.sent(),t.id.innerText=""+i.id,o.push(i),r.label=5;case 5:return d=_(a),t.nameValue.innerText=t.nameChangeElem.value,t.durationValue.innerText=d.str,n.classList.remove("_changed"),[2]}}))}))}l.addEventListener("click",(function(){i.insertAdjacentHTML("beforeend",b({id:null,name:"",duration:36e5})),i.scrollTop=i.scrollHeight;var e=i.lastElementChild;d(e),u(e).btnChange.click()})),fetch("/api/program/getAll.php").then((function(e){return e.json()})).then((function(e){for(var n=0,t=o=e;n<t.length;n++){var r=t[n];i.insertAdjacentHTML("beforeend",b(r))}for(var a=0;a<c.length;a++)d(c[a])}))},9:function(e,n,t){"use strict";t.r(n);t(10),t(11)}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcGFnZXMvYWRtaW4vcHJvZ3JhbXMvcHJvZ3JhbXMuc2NzcyIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2FkbWluL3Byb2dyYW1zQ3J1ZC9wcm9ncmFtc0NydWQudHMiLCJ3ZWJwYWNrOi8vLy4vcGFnZXMvYWRtaW4vcHJvZ3JhbXMvcHJvZ3JhbXMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb21wIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiYWRkQnRuIiwicXVlcnlTZWxlY3RvciIsInJvd3NDb250YWluZXIiLCJyb3dzIiwicHJvZ3JhbXMiLCJnZXRSb3dFbGVtcyIsInJvdyIsImlkIiwibmFtZVZhbHVlIiwibmFtZUNoYW5nZUVsZW0iLCJkdXJhdGlvblZhbHVlIiwiZHVyYXRpb25DaGFuZ2VFbGVtSG91cnMiLCJkdXJhdGlvbkNoYW5nZUVsZW1NaW5zIiwiYnRuQ2hhbmdlIiwiYnRuRGVsZXRlIiwiYnRuU2F2ZSIsImJ0bkNhbmNlbCIsImdldEJ1dHRvbnNSb3ciLCJidXR0b24iLCJwYXJlbnRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lcnNUb1JvdyIsInJvd0VsZW1zIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQ2hhbmdlQnRuQ2xpY2siLCJvbkNhbmNlbEJ0bkNsaWNrIiwib25EZWxldGVCdG5DbGljayIsIm9uU2F2ZUJ0bkNsaWNrIiwiY29udmVydER1cmF0aW9uIiwiZHVyYXRpb24iLCJob3VycyIsIk1hdGgiLCJmbG9vciIsIm1pbnMiLCJzdHIiLCJjcmVhdGVSb3ciLCJwcm9ncmFtIiwiZXZlbnQiLCJjdXJyZW50VGFyZ2V0IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJUZXh0IiwicmVtb3ZlIiwiZmluZCIsIml0ZW0iLCJyZW1vdmVDaGlsZCIsImNvbmZpcm0iLCJmZXRjaCIsIm1ldGhvZCIsImZpbHRlciIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibWFwIiwibmV3UHJvZ3JhbSIsImpzb24iLCJwdXNoIiwiZHVyYXRpb25PYmoiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJuZXdSb3ciLCJsYXN0RWxlbWVudENoaWxkIiwiY2xpY2siLCJ0aGVuIiwicmVzcCIsImRhdGEiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtC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QU8sS0FBY2pDLEVBQWN1RCxtQkFBbUIsWUFBYXZCLEVBQVVDLElBQ3RGLElBQUssSUFBSXRFLEVBQUksRUFBR0EsRUFBSXNDLEVBQUsrRCxPQUFRckcsSUFBS3VELEVBQXVCakIsRUFBS3RDLFEsK0JDYnRFIiwiZmlsZSI6ImFkbWluL3Byb2dyYW1zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYWRtaW4vcHJvZ3JhbXMuY3NzXCI7IiwiZXhwb3J0IHsgfTtcblxuY29uc3QgY29tcCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwcm9ncmFtcy1jcnVkLWNvbXBvbmVudFwiKVswXSBhcyBIVE1MRWxlbWVudDtcbmNvbnN0IGFkZEJ0biA9IGNvbXAucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fYnRuLl9hZGRcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5jb25zdCByb3dzQ29udGFpbmVyID0gY29tcC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGFibGVfX2JvZHlcIilbMF0gYXMgSFRNTEVsZW1lbnQ7XG5jb25zdCByb3dzID0gcm93c0NvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGFibGVfX3Jvd1wiKSBhcyBIVE1MQ29sbGVjdGlvbk9mPEhUTUxFbGVtZW50PjtcbmxldCBwcm9ncmFtczogUHJvZ3JhbVtdID0gW107XG5cbmFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25BZGRCdG5DbGljayk7XG5cbmZldGNoKGAvYXBpL3Byb2dyYW0vZ2V0QWxsLnBocGApLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKS50aGVuKChkYXRhKSA9PiB7XG4gICAgcHJvZ3JhbXMgPSBkYXRhO1xuICAgIGZvciAobGV0IHByb2dyYW0gb2YgcHJvZ3JhbXMpIHJvd3NDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGNyZWF0ZVJvdyhwcm9ncmFtKSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSBhZGRFdmVudExpc3RlbmVyc1RvUm93KHJvd3NbaV0pO1xufSk7XG5cbmZ1bmN0aW9uIGdldFJvd0VsZW1zKHJvdzogSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpZDogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2NlbGwuX2lkIC50YWJsZV9fY2VsbC12YWx1ZVwiKSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgbmFtZVZhbHVlOiByb3cucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fY2VsbC5fbmFtZSAudGFibGVfX2NlbGwtdmFsdWVcIikgYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgIG5hbWVDaGFuZ2VFbGVtOiByb3cucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fY2VsbC5fbmFtZSAudGFibGVfX2NlbGwtY2hhbmdlLWVsZW1cIikgYXMgSFRNTElucHV0RWxlbWVudCxcbiAgICAgICAgZHVyYXRpb25WYWx1ZTogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2NlbGwuX2R1cmF0aW9uIC50YWJsZV9fY2VsbC12YWx1ZVwiKSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgZHVyYXRpb25DaGFuZ2VFbGVtSG91cnM6IHJvdy5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19jZWxsLl9kdXJhdGlvbiAudGFibGVfX2NlbGwtY2hhbmdlLWVsZW0uX2hvdXJzXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgICAgIGR1cmF0aW9uQ2hhbmdlRWxlbU1pbnM6IHJvdy5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19jZWxsLl9kdXJhdGlvbiAudGFibGVfX2NlbGwtY2hhbmdlLWVsZW0uX21pbnNcIikgYXMgSFRNTElucHV0RWxlbWVudCxcbiAgICAgICAgYnRuQ2hhbmdlOiByb3cucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fYnRuLl9jaGFuZ2VcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQsXG4gICAgICAgIGJ0bkRlbGV0ZTogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2J0bi5fZGVsZXRlXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50LFxuICAgICAgICBidG5TYXZlOiByb3cucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fYnRuLl9zYXZlXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50LFxuICAgICAgICBidG5DYW5jZWw6IHJvdy5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19idG4uX2NhbmNlbFwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0QnV0dG9uc1JvdyhidXR0b246IEhUTUxCdXR0b25FbGVtZW50KSB7XG4gICAgcmV0dXJuIChidXR0b24ucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudCkucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnNUb1Jvdyhyb3c6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3Qgcm93RWxlbXMgPSBnZXRSb3dFbGVtcyhyb3cpO1xuICAgIHJvd0VsZW1zLmJ0bkNoYW5nZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25DaGFuZ2VCdG5DbGljayk7XG4gICAgcm93RWxlbXMuYnRuQ2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkNhbmNlbEJ0bkNsaWNrKTtcbiAgICByb3dFbGVtcy5idG5EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uRGVsZXRlQnRuQ2xpY2spO1xuICAgIHJvd0VsZW1zLmJ0blNhdmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uU2F2ZUJ0bkNsaWNrKTtcbn1cblxuZnVuY3Rpb24gY29udmVydER1cmF0aW9uKGR1cmF0aW9uOiBudW1iZXIpIHtcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAzNjAwMDAwKTtcbiAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcigoZHVyYXRpb24gLSBob3VycyAqIDM2MDAwMDApIC8gNjAwMDApO1xuICAgIGNvbnN0IHN0ciA9IChob3VycyA+IDAgPyBob3VycyArIFwi0YcuIFwiIDogXCJcIikgKyAobWlucyA+IDAgfHwgaG91cnMgPT09IDAgPyBtaW5zICsgXCLQvNC40L0uXCIgOiBcIlwiKTtcbiAgICByZXR1cm4geyBob3VycywgbWlucywgc3RyIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUm93KHByb2dyYW06IFByb2dyYW0pIHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGNvbnZlcnREdXJhdGlvbihwcm9ncmFtLmR1cmF0aW9uKTtcbiAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJ0YWJsZV9fcm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZV9fY29udGVudC1jZWxscy1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZV9fY2VsbCBfaWRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwtdmFsdWVcIj4ke3Byb2dyYW0uaWQgfHwgXCJcIn08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlX19jZWxsIF9uYW1lXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlX19jZWxsLXZhbHVlXCI+JHtwcm9ncmFtLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidGFibGVfX2NlbGwtY2hhbmdlLWVsZW1cIiBtYXhsZW5ndGg9XCIyMDBcIiBuYW1lPVwibmFtZVwiIHZhbHVlPVwiJHtwcm9ncmFtLm5hbWV9XCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZV9fY2VsbCBfZHVyYXRpb25cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwtdmFsdWVcIj4ke2R1cmF0aW9uLnN0cn08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwtY2hhbmdlLWVsZW0tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInRhYmxlX19jZWxsLWNoYW5nZS1lbGVtIF9ob3Vyc1wiIHR5cGU9XCJudW1iZXJcIiBtaW49XCIwXCIgbWF4PVwiMjRcIiB2YWx1ZT1cIiR7ZHVyYXRpb24uaG91cnN9XCI+0YcuXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInRhYmxlX19jZWxsLWNoYW5nZS1lbGVtIF9taW5zXCIgdHlwZT1cIm51bWJlclwiIG1pbj1cIjBcIiBtYXg9XCI1OVwiIHZhbHVlPVwiJHtkdXJhdGlvbi5taW5zfVwiPtC80LjQvS5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlX19jZWxsIF9idG5zXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicGkgcGktcGVuY2lsIHRhYmxlX19idG4gX2NoYW5nZVwiPjwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBpIHBpLXRyYXNoIHRhYmxlX19idG4gX2RlbGV0ZVwiPjwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBpIHBpLXNhdmUgdGFibGVfX2J0biBfc2F2ZVwiPjwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBpIHBpLXRpbWVzIHRhYmxlX19idG4gX2NhbmNlbFwiPjwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5gXG59XG5cbmZ1bmN0aW9uIG9uQWRkQnRuQ2xpY2soKSB7XG4gICAgY29uc3QgbmV3UHJvZ3JhbTogUHJvZ3JhbSA9IHtcbiAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGR1cmF0aW9uOiAzNjAwMDAwXG4gICAgfVxuICAgIHJvd3NDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGNyZWF0ZVJvdyhuZXdQcm9ncmFtKSk7XG4gICAgcm93c0NvbnRhaW5lci5zY3JvbGxUb3AgPSByb3dzQ29udGFpbmVyLnNjcm9sbEhlaWdodDtcbiAgICBjb25zdCBuZXdSb3cgPSByb3dzQ29udGFpbmVyLmxhc3RFbGVtZW50Q2hpbGQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcnNUb1JvdyhuZXdSb3cpO1xuICAgIGdldFJvd0VsZW1zKG5ld1JvdykuYnRuQ2hhbmdlLmNsaWNrKCk7XG59XG5cbmZ1bmN0aW9uIG9uQ2hhbmdlQnRuQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBjb25zdCByb3cgPSBnZXRCdXR0b25zUm93KGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQpO1xuICAgIHJvdy5jbGFzc0xpc3QuYWRkKFwiX2NoYW5nZWRcIik7XG59XG5cbmZ1bmN0aW9uIG9uQ2FuY2VsQnRuQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBjb25zdCByb3cgPSBnZXRCdXR0b25zUm93KGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQpO1xuICAgIGNvbnN0IHJvd0VsZW1zID0gZ2V0Um93RWxlbXMocm93KTtcbiAgICBpZiAocm93RWxlbXMuaWQuaW5uZXJUZXh0KSB7XG4gICAgICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKFwiX2NoYW5nZWRcIik7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBwcm9ncmFtcy5maW5kKChpdGVtKSA9PiBpdGVtLmlkICsgXCJcIiA9PT0gcm93RWxlbXMuaWQuaW5uZXJUZXh0KTtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBjb252ZXJ0RHVyYXRpb24ocHJvZ3JhbS5kdXJhdGlvbik7XG4gICAgICAgIHJvd0VsZW1zLm5hbWVDaGFuZ2VFbGVtLnZhbHVlID0gcHJvZ3JhbS5uYW1lO1xuICAgICAgICByb3dFbGVtcy5kdXJhdGlvbkNoYW5nZUVsZW1Ib3Vycy52YWx1ZSA9IGR1cmF0aW9uLmhvdXJzICsgXCJcIjtcbiAgICAgICAgcm93RWxlbXMuZHVyYXRpb25DaGFuZ2VFbGVtTWlucy52YWx1ZSA9IGR1cmF0aW9uLm1pbnMgKyBcIlwiO1xuICAgIH1cbiAgICBlbHNlIHJvdy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHJvdyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG9uRGVsZXRlQnRuQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBpZiAoIWNvbmZpcm0oXCLQpdC+0YDQvtGI0L4g0L/QvtC00YPQvNCw0LvQuD9cIikpIHJldHVybjtcbiAgICBjb25zdCByb3cgPSBnZXRCdXR0b25zUm93KGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQpO1xuICAgIGNvbnN0IHJvd0VsZW1zID0gZ2V0Um93RWxlbXMocm93KTtcbiAgICBhd2FpdCBmZXRjaChcIi9hcGkvcHJvZ3JhbS9kZWxldGUucGhwP2lkPVwiICsgcm93RWxlbXMuaWQuaW5uZXJUZXh0LCB7IG1ldGhvZDogXCJkZWxldGVcIiB9KTtcbiAgICBwcm9ncmFtcyA9IHByb2dyYW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCArIFwiXCIgIT09IHJvd0VsZW1zLmlkLmlubmVyVGV4dCk7XG4gICAgcm93LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQocm93KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gb25TYXZlQnRuQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBjb25zdCByb3cgPSBnZXRCdXR0b25zUm93KGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQpO1xuICAgIGNvbnN0IHJvd0VsZW1zID0gZ2V0Um93RWxlbXMocm93KTtcbiAgICBjb25zdCBkdXJhdGlvbiA9ICtyb3dFbGVtcy5kdXJhdGlvbkNoYW5nZUVsZW1Ib3Vycy52YWx1ZSAqIDM2MDAwMDAgKyArcm93RWxlbXMuZHVyYXRpb25DaGFuZ2VFbGVtTWlucy52YWx1ZSAqIDYwMDAwO1xuICAgIGlmIChyb3dFbGVtcy5pZC5pbm5lclRleHQpIHtcbiAgICAgICAgY29uc3QgY2hhbmdlZFByb2dyYW0gPSB7XG4gICAgICAgICAgICBpZDogK3Jvd0VsZW1zLmlkLmlubmVyVGV4dCxcbiAgICAgICAgICAgIG5hbWU6IHJvd0VsZW1zLm5hbWVDaGFuZ2VFbGVtLnZhbHVlLFxuICAgICAgICAgICAgZHVyYXRpb25cbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgZmV0Y2goYC9hcGkvcHJvZ3JhbS9jaGFuZ2UucGhwYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcInB1dFwiLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2hhbmdlZFByb2dyYW0pXG4gICAgICAgIH0pO1xuICAgICAgICBwcm9ncmFtcyA9IHByb2dyYW1zLm1hcCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gY2hhbmdlZFByb2dyYW0uaWQgPyBjaGFuZ2VkUHJvZ3JhbSA6IGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG5ld1Byb2dyYW0gPSB7XG4gICAgICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgICAgIG5hbWU6IHJvd0VsZW1zLm5hbWVDaGFuZ2VFbGVtLnZhbHVlLFxuICAgICAgICAgICAgZHVyYXRpb25cbiAgICAgICAgfVxuICAgICAgICBuZXdQcm9ncmFtLmlkID0gYXdhaXQgKGF3YWl0IGZldGNoKGAvYXBpL3Byb2dyYW0vYWRkLnBocGAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJwb3N0XCIsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShuZXdQcm9ncmFtKVxuICAgICAgICB9KSkuanNvbigpO1xuICAgICAgICByb3dFbGVtcy5pZC5pbm5lclRleHQgPSBcIlwiICsgbmV3UHJvZ3JhbS5pZDtcbiAgICAgICAgcHJvZ3JhbXMucHVzaChuZXdQcm9ncmFtKTtcbiAgICB9XG4gICAgY29uc3QgZHVyYXRpb25PYmogPSBjb252ZXJ0RHVyYXRpb24oZHVyYXRpb24pO1xuICAgIHJvd0VsZW1zLm5hbWVWYWx1ZS5pbm5lclRleHQgPSByb3dFbGVtcy5uYW1lQ2hhbmdlRWxlbS52YWx1ZTtcbiAgICByb3dFbGVtcy5kdXJhdGlvblZhbHVlLmlubmVyVGV4dCA9IGR1cmF0aW9uT2JqLnN0cjtcbiAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShcIl9jaGFuZ2VkXCIpO1xufVxuXG5jbGFzcyBQcm9ncmFtIHtcbiAgICBpZDogbnVtYmVyO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkdXJhdGlvbjogbnVtYmVyO1xufSIsImltcG9ydCBcIi4vcHJvZ3JhbXMuc2Nzc1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9hZG1pbi9wcm9ncmFtc0NydWQvcHJvZ3JhbXNDcnVkLnRzXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==