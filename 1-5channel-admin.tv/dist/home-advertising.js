!function(e){var n={};function t(r){if(n[r])return n[r].exports;var l=n[r]={i:r,l:!1,exports:{}};return e[r].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var l in e)t.d(r,l,function(n){return e[n]}.bind(null,l));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"d",(function(){return l})),t.d(n,"c",(function(){return a})),t.d(n,"e",(function(){return i})),t.d(n,"b",(function(){return c}));var r="http://1-5channel.tv",l="/files/images/";function a(e){return e.firstElementChild.innerHTML}function i(e,n){return e.firstElementChild.innerHTML=n}function c(e){new Quill(e,{theme:"snow",modules:{toolbar:[[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{script:"sub"},{script:"super"},{color:[]},"clean"]]}})}},function(e,n,t){e.exports=t.p+"home-advertising.css"},,function(e,n,t){"use strict";t.r(n);t(1);function r(e){e.innerHTML="",e.insertAdjacentHTML("afterbegin",'\n        <img src="/files/images/noImage.png">\n        <label class="button">\n            <span>Выбрать изображение</span>\n            <input type="file">\n        </label>\n    '),e.classList.add("input-img");var n=e.getElementsByTagName("img")[0],t=e.getElementsByTagName("input")[0];t.addEventListener("change",(function(r){var l=r.target.files;if("image/jpeg"!==l[0].type&&"image/png"!==l[0].type)return alert("Error. Invalid file type. Valid only 'image/jpeg' and 'image/png'.");var a=new FileReader;a.addEventListener("load",(function(r){n.src=r.target.result,e.dataset.newValue=r.target.result,t.value=null})),a.readAsDataURL(l[0])}))}function l(e){return e.dataset.newValue}var a=t(0),i=function(e,n,t,r){return new(t||(t=Promise))((function(l,a){function i(e){try{o(r.next(e))}catch(e){a(e)}}function c(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var n;e.done?l(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}o((r=r.apply(e,n||[])).next())}))},c=function(e,n){var t,r,l,a,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(l=2&a[0]?r.return:a[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,a[1])).done)return l;switch(r=0,l&&(a=[2&a[0],l.value]),a[0]){case 0:case 1:l=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!l||a[1]>l[0]&&a[1]<l[3])){i.label=a[1];break}if(6===a[0]&&i.label<l[1]){i.label=l[1],l=a;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(a);break}l[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=l=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},o=document.getElementsByClassName("advertising-crud-component")[0],s=o.querySelector(".table__btn._add"),u=o.getElementsByClassName("table__body")[0],d=u.getElementsByClassName("table__row"),b=[];function _(e){return{id:e.querySelector(".table__cell._id .table__cell-value"),nameValue:e.querySelector(".table__cell._name .table__cell-value"),nameChangeElem:e.querySelector(".table__cell._name .table__cell-change-elem"),yearValue:e.querySelector(".table__cell._year .table__cell-value"),yearChangeElem:e.querySelector(".table__cell._year .table__cell-change-elem"),descriptionChangeElem:e.querySelector(".table__cell._description .table__cell-change-elem"),btnChange:e.querySelector(".table__btn._change"),btnDelete:e.querySelector(".table__btn._delete"),btnSave:e.querySelector(".table__btn._save"),btnCancel:e.querySelector(".table__btn._cancel"),btnOrderPlus:e.querySelector(".table__btn._order-plus"),btnOrderMinus:e.querySelector(".table__btn._order-minus"),btnBlock:e.querySelector(".table__btn._block"),inputImg:e.querySelector(".table__cell._img .table__cell-change-elem")}}function m(e){return e.parentElement.parentElement}function f(e){var n=_(e);n.btnChange.addEventListener("click",h),n.btnCancel.addEventListener("click",y),n.btnDelete.addEventListener("click",E),n.btnSave.addEventListener("click",k),n.btnBlock.addEventListener("click",S),n.btnOrderPlus.addEventListener("click",p),n.btnOrderMinus.addEventListener("click",g),Object(a.b)(n.descriptionChangeElem)}function p(e){var n=m(e.currentTarget);n.nextElementSibling&&n.parentElement.insertBefore(n,n.nextElementSibling.nextElementSibling)}function g(e){var n=m(e.currentTarget);n.previousElementSibling&&n.parentElement.insertBefore(n,n.previousElementSibling)}function v(e){return'<div class="table__row" data-is-block="'+(e.is_block?"true":"false")+'" data-order="'+e.order+'">\n        <div class="table__content-cells-container">\n            <div class="table__cell _id">\n                <div class="table__cell-value">'+(e.id||"")+'</div>\n            </div>\n            <div class="table__cell _name">\n                <div class="table__cell-value">'+e.name+'</div>\n                <input class="table__cell-change-elem" maxlength="200" name="name" value="'+e.name+'">\n            </div>\n            <div class="table__cell _year">\n                <div class="table__cell-value">'+e.year+'</div>\n                <input class="table__cell-change-elem" type="number" min="0" max="9999" value="'+e.year+'">\n            </div>\n            <div class="table__cell _description">\n                <div>Описание</div>\n                <div class="table__cell-change-elem">'+e.description+'</div>\n            </div>\n            <div class="table__cell _img">\n                <div>Изображение</div>\n                <div class="input-img table__cell-change-elem"></div>\n            </div>\n        </div>\n        <div class="table__cell _btns">\n            <button class="pi pi-pencil table__btn _change"></button>\n            <button class="pi pi-trash table__btn _delete"></button>\n            <button class="pi pi-save table__btn _save"></button>\n            <button class="pi pi-times table__btn _cancel"></button>\n            <button class="pi pi-arrow-up table__btn _order-minus"></button>\n            <button class="pi pi-arrow-down table__btn _order-plus"></button>\n            <button class="pi pi-'+(e.is_block?"unlock":"lock")+' table__btn _block"></button>\n        </div>\n    </div>'}function h(e){m(e.currentTarget).classList.add("_changed")}function y(e){var n=m(e.currentTarget),t=_(n);if(t.id.innerText){n.classList.remove("_changed");var r=b.find((function(e){return e.id+""===t.id.innerText}));t.nameChangeElem.value=r.name,Object(a.e)(t.descriptionChangeElem,r.description),t.yearChangeElem.value=r.year+"",n.dataset.isBlock=r.is_block?"true":"false",r.is_block?(t.btnBlock.classList.remove("pi-lock"),t.btnBlock.classList.add("pi-unlock")):(t.btnBlock.classList.remove("pi-unlock"),t.btnBlock.classList.add("pi-lock"));for(var l=null,i=r.order,c=1;c<=d.length;c++)if(d[c]===n){l=c;break}l>i?n.parentElement.insertBefore(n,d[i-1]):l<i&&n.parentElement.insertBefore(n,d[i-1].nextElementSibling)}else n.parentElement.removeChild(n)}function E(e){return i(this,void 0,void 0,(function(){var n,t,r,l,i,o,s;return c(this,(function(c){switch(c.label){case 0:return confirm("Хорошо подумали?")?(n=m(e.currentTarget),t=_(n),[4,fetch(a.a+"/api/advertising/delete.php?id="+t.id.innerText,{method:"delete"})]):[2];case 1:for(c.sent(),b=b.filter((function(e){return e.id!==+t.id.innerText})),r=+n.dataset.order,n.parentElement.removeChild(n),l=0;l<d.length;l++)+d[l].dataset.order>r&&(d[l].dataset.order=+d[l].dataset.order-1+"");for(i=0,o=b;i<o.length;i++)(s=o[i]).order>r&&s.order--;return[2]}}))}))}function k(e){return i(this,void 0,void 0,(function(){var n,t,r,i,o,s,u,f,p,g,v,h,y,E,k,S;return c(this,(function(c){switch(c.label){case 0:for(n=m(e.currentTarget),t=_(n),o=0;o<d.length;o++)if(d[o]===n){r=o+1;break}for(s=0,u=b;s<u.length;s++)if((S=u[s]).id===+t.id.innerText){i=S.order;break}return i||(i=b.length+1),f=null,t.id.innerText?(f=+t.id.innerText,p={id:+t.id.innerText,name:t.nameChangeElem.value,description:Object(a.c)(t.descriptionChangeElem),year:+t.yearChangeElem.value,img_file_name:"",is_block:"true"===n.dataset.isBlock,order:r,newImg:l(t.inputImg)},[4,fetch(a.a+"/api/advertising/change.php",{method:"put",body:JSON.stringify(p)})]):[3,2];case 1:return c.sent(),b=b.map((function(e){return e.id===p.id?p:e})),[3,5];case 2:return g={id:null,name:t.nameChangeElem.value,description:Object(a.c)(t.descriptionChangeElem),year:+t.yearChangeElem.value,img_file_name:"",is_block:"true"===n.dataset.isBlock,order:r,newImg:l(t.inputImg)},v=g,[4,fetch(a.a+"/api/advertising/add.php",{method:"post",body:JSON.stringify(g)})];case 3:return[4,c.sent().json()];case 4:v.id=c.sent(),f=g.id,t.id.innerText=""+g.id,b.push(g),c.label=5;case 5:if(t.nameValue.innerText=t.nameChangeElem.value,t.yearValue.innerText=t.yearChangeElem.value,r>i)for(h=0,y=b;h<y.length;h++)(S=y[h]).order>i&&S.order<=r&&S.id!==f&&S.order--;else if(r<i)for(E=0,k=b;E<k.length;E++)(S=k[E]).order<i&&S.order>=r&&S.id!==f&&S.order++;return n.classList.remove("_changed"),[2]}}))}))}function S(e){var n=e.currentTarget,t=m(n);t.dataset.isBlock="true"===t.dataset.isBlock?"false":"true","true"===t.dataset.isBlock?(n.classList.remove("pi-lock"),n.classList.add("pi-unlock")):(n.classList.remove("pi-unlock"),n.classList.add("pi-lock"))}s.addEventListener("click",(function(){var e={id:null,name:"",description:"",img_file_name:"",is_block:!1,order:b.length+1,year:(new Date).getFullYear()};u.insertAdjacentHTML("beforeend",v(e));var n=u.lastElementChild;f(n),r(n.getElementsByClassName("input-img")[0]),_(n).btnChange.click(),setTimeout((function(){return u.scrollTop=u.scrollHeight}))})),fetch(a.a+"/api/advertising/getAll.php").then((function(e){return e.json()})).then((function(e){for(var n=0,t=b=e;n<t.length;n++){var l=t[n];u.insertAdjacentHTML("beforeend",v(l));var i=d[d.length-1].getElementsByClassName("input-img")[0];r(i),l.img_file_name&&(c=i,o=a.d+l.img_file_name,c.getElementsByTagName("img")[0].src=o)}for(var c,o,s=0;s<d.length;s++)f(d[s])}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc2VydmljZXMvY29tbW9uLnRzIiwid2VicGFjazovLy8uL3BhZ2VzL2hvbWUtYWR2ZXJ0aXNpbmcvaG9tZS1hZHZlcnRpc2luZy5zY3NzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvaW5wdXQtaW1nL2lucHV0LWltZy50cyIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2FkdmVydGlzaW5nQ3J1ZC9hZHZlcnRpc2luZ0NydWQudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJiYWNrZW5kQWRkcmVzcyIsImltYWdlc1VybFJvb3QiLCJnZXRRdWlsbEVkaXRvclZhbHVlIiwicXVpbGxFZGl0b3JFbGVtIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpbm5lckhUTUwiLCJzZXRRdWlsbEVkaXRvclZhbHVlIiwiY3JlYXRlU3RhbmRhcnRRdWlsbEVkaXRvciIsImVsZW0iLCJRdWlsbCIsInRoZW1lIiwidG9vbGJhciIsImNyZWF0ZUlucHV0SW1nIiwiZWxlbWVudCIsImluc2VydEFkamFjZW50SFRNTCIsImNsYXNzTGlzdCIsImFkZCIsImltZyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJmaWxlcyIsInRhcmdldCIsInR5cGUiLCJhbGVydCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJzcmMiLCJyZXN1bHQiLCJkYXRhc2V0IiwibmV3VmFsdWUiLCJyZWFkQXNEYXRhVVJMIiwiZ2V0TmV3SW5wdXRJbWdWYWx1ZSIsImNvbXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJhZGRCdG4iLCJxdWVyeVNlbGVjdG9yIiwicm93c0NvbnRhaW5lciIsInJvd3MiLCJhZHZlcnRpc2luZ3MiLCJnZXRSb3dFbGVtcyIsInJvdyIsImlkIiwibmFtZVZhbHVlIiwibmFtZUNoYW5nZUVsZW0iLCJ5ZWFyVmFsdWUiLCJ5ZWFyQ2hhbmdlRWxlbSIsImRlc2NyaXB0aW9uQ2hhbmdlRWxlbSIsImJ0bkNoYW5nZSIsImJ0bkRlbGV0ZSIsImJ0blNhdmUiLCJidG5DYW5jZWwiLCJidG5PcmRlclBsdXMiLCJidG5PcmRlck1pbnVzIiwiYnRuQmxvY2siLCJpbnB1dEltZyIsImdldEJ1dHRvbnNSb3ciLCJidXR0b24iLCJwYXJlbnRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lcnNUb1JvdyIsInJvd0VsZW1zIiwib25DaGFuZ2VCdG5DbGljayIsIm9uQ2FuY2VsQnRuQ2xpY2siLCJvbkRlbGV0ZUJ0bkNsaWNrIiwib25TYXZlQnRuQ2xpY2siLCJvbkJsb2NrQnRuQ2xpY2siLCJvbk9yZGVyUGx1c0J0bkNsaWNrIiwib25PcmRlck1pbnVzQnRuQ2xpY2siLCJjdXJyZW50VGFyZ2V0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNyZWF0ZVJvdyIsImFkIiwiaXNfYmxvY2siLCJvcmRlciIsInllYXIiLCJkZXNjcmlwdGlvbiIsImlubmVyVGV4dCIsInJlbW92ZSIsImZpbmQiLCJpdGVtIiwiaXNCbG9jayIsImN1cnJlbnRPcmRlciIsIm9sZE9yZGVyIiwibGVuZ3RoIiwicmVtb3ZlQ2hpbGQiLCJjb25maXJtIiwiZmV0Y2giLCJtZXRob2QiLCJmaWx0ZXIiLCJyb3dPcmRlciIsIm5ld09yZGVyIiwiY2hhbmdlZEFkSWQiLCJpbWdfZmlsZV9uYW1lIiwibmV3SW1nIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtYXAiLCJuZXdBZCIsImpzb24iLCJwdXNoIiwiYnRuIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwibmV3Um93IiwibGFzdEVsZW1lbnRDaGlsZCIsImNsaWNrIiwic2V0VGltZW91dCIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsInRoZW4iLCJyZXNwIiwiZGF0YSIsImlucEltZyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUs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QUFpQiwrQkFBK0J3QixNQUFLLFNBQUNDLEdBQVMsT0FBQUEsRUFBS1osVUFBUVcsTUFBSyxTQUFDRSxHQUVwRixJQUFlLFVBRGYzRSxFQUFlMkUsRUFDQSxlQUFjLENBQXhCLElBQUl6QyxFQUFFLEtBQ1BwQyxFQUFjekIsbUJBQW1CLFlBQWE0RCxFQUFVQyxJQUN4RCxJQUFNMEMsRUFBUzdFLEVBQUtBLEVBQUsrQyxPQUFTLEdBQUduRCx1QkFBdUIsYUFBYSxHQUN6RXhCLEVBQWV5RyxHQUNYMUMsRUFBR3FCLGdCRFV5Qm5GLEVDVmN3RyxFRFVRcEksRUNWQSxJQUFnQjBGLEVBQUdxQixjRFc3RW5GLEVBQVFLLHFCQUFxQixPQUFPLEdBQUdVLElBQU0zQyxHQ1Q3QyxJRFFHLElBQWlDNEIsRUFBc0I1QixFQ1JqRGpCLEVBQUksRUFBR0EsRUFBSXdFLEVBQUsrQyxPQUFRdkgsSUFBSzZGLEVBQXVCckIsRUFBS3hFIiwiZmlsZSI6ImhvbWUtYWR2ZXJ0aXNpbmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJkZWNsYXJlIGxldCBRdWlsbDtcblxuZXhwb3J0IGNvbnN0IGJhY2tlbmRBZGRyZXNzID0gXCJodHRwOi8vMS01Y2hhbm5lbC50dlwiO1xuZXhwb3J0IGNvbnN0IGltYWdlc1VybFJvb3QgPSBcIi9maWxlcy9pbWFnZXMvXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWlsbEVkaXRvclZhbHVlKHF1aWxsRWRpdG9yRWxlbTogSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gcXVpbGxFZGl0b3JFbGVtLmZpcnN0RWxlbWVudENoaWxkLmlubmVySFRNTDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFF1aWxsRWRpdG9yVmFsdWUocXVpbGxFZGl0b3JFbGVtOiBIVE1MRWxlbWVudCwgdmFsdWU6IHN0cmluZykge1xuICAgIHJldHVybiBxdWlsbEVkaXRvckVsZW0uZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MID0gdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdGFuZGFydFF1aWxsRWRpdG9yKGVsZW06IEhUTUxFbGVtZW50KSB7XG4gICAgbmV3IFF1aWxsKGVsZW0sIHtcbiAgICAgICAgdGhlbWU6ICdzbm93JyxcbiAgICAgICAgbW9kdWxlczoge1xuICAgICAgICAgICAgdG9vbGJhcjogW1xuICAgICAgICAgICAgICAgIFt7ICdzaXplJzogWydzbWFsbCcsIGZhbHNlLCAnbGFyZ2UnLCAnaHVnZSddIH1dLFxuICAgICAgICAgICAgICAgIFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJywgJ3N0cmlrZSddLFxuICAgICAgICAgICAgICAgIFt7ICdzY3JpcHQnOiAnc3ViJyB9LCB7ICdzY3JpcHQnOiAnc3VwZXInIH0sIHsgJ2NvbG9yJzogW10gfSwgJ2NsZWFuJ10sXG4gICAgICAgICAgICBdLFxuXG4gICAgICAgIH1cbiAgICB9KTtcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJob21lLWFkdmVydGlzaW5nLmNzc1wiOyIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbnB1dEltZyhlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBlbGVtZW50Lmluc2VydEFkamFjZW50SFRNTChcImFmdGVyYmVnaW5cIiwgYFxuICAgICAgICA8aW1nIHNyYz1cIi9maWxlcy9pbWFnZXMvbm9JbWFnZS5wbmdcIj5cbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICA8c3Bhbj7QktGL0LHRgNCw0YLRjCDQuNC30L7QsdGA0LDQttC10L3QuNC1PC9zcGFuPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCI+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgYCk7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5wdXQtaW1nXCIpO1xuXG4gICAgY29uc3QgaW1nID0gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImltZ1wiKVswXTtcbiAgICBjb25zdCBpbnB1dCA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChldmVudCkgPT4ge1xuICAgICAgICBsZXQgZmlsZXMgPSAoZXZlbnQudGFyZ2V0IGFzIGFueSkuZmlsZXM7XG4gICAgICAgIGlmIChmaWxlc1swXS50eXBlICE9PSAnaW1hZ2UvanBlZycgJiYgZmlsZXNbMF0udHlwZSAhPT0gJ2ltYWdlL3BuZycpIHtcbiAgICAgICAgICAgIHJldHVybiBhbGVydChcIkVycm9yLiBJbnZhbGlkIGZpbGUgdHlwZS4gVmFsaWQgb25seSAnaW1hZ2UvanBlZycgYW5kICdpbWFnZS9wbmcnLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpbWcuc3JjID0gZXZlbnQudGFyZ2V0LnJlc3VsdCBhcyBzdHJpbmc7XG4gICAgICAgICAgICBlbGVtZW50LmRhdGFzZXQubmV3VmFsdWUgPSBldmVudC50YXJnZXQucmVzdWx0IGFzIHN0cmluZztcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGVzWzBdKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRJbnB1dEltZ1ZhbHVlKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImltZ1wiKVswXS5zcmMgPSB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ld0lucHV0SW1nVmFsdWUoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5kYXRhc2V0Lm5ld1ZhbHVlO1xufVxuXG4iLCJleHBvcnQgeyB9O1xuXG5pbXBvcnQgeyBjcmVhdGVJbnB1dEltZywgc2V0Q3VycmVudElucHV0SW1nVmFsdWUsIGdldE5ld0lucHV0SW1nVmFsdWUgfSBmcm9tIFwiLi4vaW5wdXQtaW1nL2lucHV0LWltZ1wiO1xuaW1wb3J0IHsgYmFja2VuZEFkZHJlc3MsIGdldFF1aWxsRWRpdG9yVmFsdWUsIHNldFF1aWxsRWRpdG9yVmFsdWUsIGNyZWF0ZVN0YW5kYXJ0UXVpbGxFZGl0b3IsIGltYWdlc1VybFJvb3QgfSBmcm9tIFwiLi4vLi4vc2VydmljZXMvY29tbW9uXCI7XG5cbmNvbnN0IGNvbXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWR2ZXJ0aXNpbmctY3J1ZC1jb21wb25lbnRcIilbMF0gYXMgSFRNTEVsZW1lbnQ7XG5jb25zdCBhZGRCdG4gPSBjb21wLnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2J0bi5fYWRkXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuY29uc3Qgcm93c0NvbnRhaW5lciA9IGNvbXAuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRhYmxlX19ib2R5XCIpWzBdIGFzIEhUTUxFbGVtZW50O1xuY29uc3Qgcm93cyA9IHJvd3NDb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRhYmxlX19yb3dcIikgYXMgSFRNTENvbGxlY3Rpb25PZjxIVE1MRWxlbWVudD47XG5sZXQgYWR2ZXJ0aXNpbmdzOiBBZHZlcnRpc2luZ1tdID0gW107XG5cbmFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25BZGRCdG5DbGljayk7XG5cbmZldGNoKGJhY2tlbmRBZGRyZXNzICsgYC9hcGkvYWR2ZXJ0aXNpbmcvZ2V0QWxsLnBocGApLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKS50aGVuKChkYXRhKSA9PiB7XG4gICAgYWR2ZXJ0aXNpbmdzID0gZGF0YTtcbiAgICBmb3IgKGxldCBhZCBvZiBhZHZlcnRpc2luZ3MpIHtcbiAgICAgICAgcm93c0NvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgY3JlYXRlUm93KGFkKSk7XG4gICAgICAgIGNvbnN0IGlucEltZyA9IHJvd3Nbcm93cy5sZW5ndGggLSAxXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiaW5wdXQtaW1nXCIpWzBdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjcmVhdGVJbnB1dEltZyhpbnBJbWcpO1xuICAgICAgICBpZiAoYWQuaW1nX2ZpbGVfbmFtZSkgc2V0Q3VycmVudElucHV0SW1nVmFsdWUoaW5wSW1nLCBpbWFnZXNVcmxSb290ICsgYWQuaW1nX2ZpbGVfbmFtZSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgYWRkRXZlbnRMaXN0ZW5lcnNUb1Jvdyhyb3dzW2ldKTtcbn0pO1xuXG5mdW5jdGlvbiBnZXRSb3dFbGVtcyhyb3c6IEhUTUxFbGVtZW50KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHJvdy5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19jZWxsLl9pZCAudGFibGVfX2NlbGwtdmFsdWVcIikgYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgIG5hbWVWYWx1ZTogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2NlbGwuX25hbWUgLnRhYmxlX19jZWxsLXZhbHVlXCIpIGFzIEhUTUxFbGVtZW50LFxuICAgICAgICBuYW1lQ2hhbmdlRWxlbTogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2NlbGwuX25hbWUgLnRhYmxlX19jZWxsLWNoYW5nZS1lbGVtXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgICAgIHllYXJWYWx1ZTogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2NlbGwuX3llYXIgLnRhYmxlX19jZWxsLXZhbHVlXCIpIGFzIEhUTUxFbGVtZW50LFxuICAgICAgICB5ZWFyQ2hhbmdlRWxlbTogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2NlbGwuX3llYXIgLnRhYmxlX19jZWxsLWNoYW5nZS1lbGVtXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgICAgIGRlc2NyaXB0aW9uQ2hhbmdlRWxlbTogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2NlbGwuX2Rlc2NyaXB0aW9uIC50YWJsZV9fY2VsbC1jaGFuZ2UtZWxlbVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50LFxuICAgICAgICBidG5DaGFuZ2U6IHJvdy5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19idG4uX2NoYW5nZVwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudCxcbiAgICAgICAgYnRuRGVsZXRlOiByb3cucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fYnRuLl9kZWxldGVcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQsXG4gICAgICAgIGJ0blNhdmU6IHJvdy5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19idG4uX3NhdmVcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQsXG4gICAgICAgIGJ0bkNhbmNlbDogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2J0bi5fY2FuY2VsXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50LFxuICAgICAgICBidG5PcmRlclBsdXM6IHJvdy5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19idG4uX29yZGVyLXBsdXNcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQsXG4gICAgICAgIGJ0bk9yZGVyTWludXM6IHJvdy5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19idG4uX29yZGVyLW1pbnVzXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50LFxuICAgICAgICBidG5CbG9jazogcm93LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2J0bi5fYmxvY2tcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQsXG4gICAgICAgIGlucHV0SW1nOiByb3cucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fY2VsbC5faW1nIC50YWJsZV9fY2VsbC1jaGFuZ2UtZWxlbVwiKSBhcyBIVE1MRWxlbWVudFxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0QnV0dG9uc1JvdyhidXR0b246IEhUTUxCdXR0b25FbGVtZW50KSB7XG4gICAgcmV0dXJuIChidXR0b24ucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudCkucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnNUb1Jvdyhyb3c6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3Qgcm93RWxlbXMgPSBnZXRSb3dFbGVtcyhyb3cpO1xuICAgIHJvd0VsZW1zLmJ0bkNoYW5nZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25DaGFuZ2VCdG5DbGljayk7XG4gICAgcm93RWxlbXMuYnRuQ2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkNhbmNlbEJ0bkNsaWNrKTtcbiAgICByb3dFbGVtcy5idG5EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uRGVsZXRlQnRuQ2xpY2spO1xuICAgIHJvd0VsZW1zLmJ0blNhdmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uU2F2ZUJ0bkNsaWNrKTtcbiAgICByb3dFbGVtcy5idG5CbG9jay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25CbG9ja0J0bkNsaWNrKTtcbiAgICByb3dFbGVtcy5idG5PcmRlclBsdXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uT3JkZXJQbHVzQnRuQ2xpY2spO1xuICAgIHJvd0VsZW1zLmJ0bk9yZGVyTWludXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uT3JkZXJNaW51c0J0bkNsaWNrKTtcbiAgICBjcmVhdGVTdGFuZGFydFF1aWxsRWRpdG9yKHJvd0VsZW1zLmRlc2NyaXB0aW9uQ2hhbmdlRWxlbSk7XG59XG5cbmZ1bmN0aW9uIG9uT3JkZXJQbHVzQnRuQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBjb25zdCByb3cgPSBnZXRCdXR0b25zUm93KGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQpO1xuICAgIGlmIChyb3cubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgIHJvdy5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShyb3csIHJvdy5uZXh0RWxlbWVudFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9uT3JkZXJNaW51c0J0bkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgY29uc3Qgcm93ID0gZ2V0QnV0dG9uc1JvdyhldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50KTtcbiAgICBpZiAocm93LnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgcm93LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHJvdywgcm93LnByZXZpb3VzRWxlbWVudFNpYmxpbmcpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUm93KGFkOiBBZHZlcnRpc2luZykge1xuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cInRhYmxlX19yb3dcIiBkYXRhLWlzLWJsb2NrPVwiJHthZC5pc19ibG9jayA/IFwidHJ1ZVwiIDogXCJmYWxzZVwifVwiIGRhdGEtb3JkZXI9XCIke2FkLm9yZGVyfVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NvbnRlbnQtY2VsbHMtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwgX2lkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlX19jZWxsLXZhbHVlXCI+JHthZC5pZCB8fCBcIlwifTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwgX25hbWVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwtdmFsdWVcIj4ke2FkLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidGFibGVfX2NlbGwtY2hhbmdlLWVsZW1cIiBtYXhsZW5ndGg9XCIyMDBcIiBuYW1lPVwibmFtZVwiIHZhbHVlPVwiJHthZC5uYW1lfVwiPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwgX3llYXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwtdmFsdWVcIj4ke2FkLnllYXJ9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidGFibGVfX2NlbGwtY2hhbmdlLWVsZW1cIiB0eXBlPVwibnVtYmVyXCIgbWluPVwiMFwiIG1heD1cIjk5OTlcIiB2YWx1ZT1cIiR7YWQueWVhcn1cIj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlX19jZWxsIF9kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgIDxkaXY+0J7Qv9C40YHQsNC90LjQtTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZV9fY2VsbC1jaGFuZ2UtZWxlbVwiPiR7YWQuZGVzY3JpcHRpb259PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZV9fY2VsbCBfaW1nXCI+XG4gICAgICAgICAgICAgICAgPGRpdj7QmNC30L7QsdGA0LDQttC10L3QuNC1PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWltZyB0YWJsZV9fY2VsbC1jaGFuZ2UtZWxlbVwiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwgX2J0bnNcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwaSBwaS1wZW5jaWwgdGFibGVfX2J0biBfY2hhbmdlXCI+PC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicGkgcGktdHJhc2ggdGFibGVfX2J0biBfZGVsZXRlXCI+PC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicGkgcGktc2F2ZSB0YWJsZV9fYnRuIF9zYXZlXCI+PC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicGkgcGktdGltZXMgdGFibGVfX2J0biBfY2FuY2VsXCI+PC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicGkgcGktYXJyb3ctdXAgdGFibGVfX2J0biBfb3JkZXItbWludXNcIj48L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwaSBwaS1hcnJvdy1kb3duIHRhYmxlX19idG4gX29yZGVyLXBsdXNcIj48L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwaSBwaS0ke2FkLmlzX2Jsb2NrID8gXCJ1bmxvY2tcIiA6IFwibG9ja1wifSB0YWJsZV9fYnRuIF9ibG9ja1wiPjwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5gXG59XG5cbmZ1bmN0aW9uIG9uQWRkQnRuQ2xpY2soKSB7XG4gICAgY29uc3QgbmV3QWQ6IEFkdmVydGlzaW5nID0ge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiXCIsXG4gICAgICAgIGltZ19maWxlX25hbWU6IFwiXCIsXG4gICAgICAgIGlzX2Jsb2NrOiBmYWxzZSxcbiAgICAgICAgb3JkZXI6IGFkdmVydGlzaW5ncy5sZW5ndGggKyAxLFxuICAgICAgICB5ZWFyOiAobmV3IERhdGUpLmdldEZ1bGxZZWFyKClcbiAgICB9XG4gICAgcm93c0NvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgY3JlYXRlUm93KG5ld0FkKSk7XG4gICAgY29uc3QgbmV3Um93ID0gcm93c0NvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkIGFzIEhUTUxFbGVtZW50O1xuICAgIGFkZEV2ZW50TGlzdGVuZXJzVG9Sb3cobmV3Um93KTtcbiAgICBjcmVhdGVJbnB1dEltZyhuZXdSb3cuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImlucHV0LWltZ1wiKVswXSBhcyBIVE1MRWxlbWVudCk7XG4gICAgZ2V0Um93RWxlbXMobmV3Um93KS5idG5DaGFuZ2UuY2xpY2soKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHJvd3NDb250YWluZXIuc2Nyb2xsVG9wID0gcm93c0NvbnRhaW5lci5zY3JvbGxIZWlnaHQpO1xufVxuXG5mdW5jdGlvbiBvbkNoYW5nZUJ0bkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgY29uc3Qgcm93ID0gZ2V0QnV0dG9uc1JvdyhldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50KTtcbiAgICByb3cuY2xhc3NMaXN0LmFkZChcIl9jaGFuZ2VkXCIpO1xufVxuXG5mdW5jdGlvbiBvbkNhbmNlbEJ0bkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgY29uc3Qgcm93ID0gZ2V0QnV0dG9uc1JvdyhldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50KTtcbiAgICBjb25zdCByb3dFbGVtcyA9IGdldFJvd0VsZW1zKHJvdyk7XG4gICAgaWYgKHJvd0VsZW1zLmlkLmlubmVyVGV4dCkge1xuICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShcIl9jaGFuZ2VkXCIpO1xuICAgICAgICBjb25zdCBhZCA9IGFkdmVydGlzaW5ncy5maW5kKChpdGVtKSA9PiBpdGVtLmlkICsgXCJcIiA9PT0gcm93RWxlbXMuaWQuaW5uZXJUZXh0KTtcbiAgICAgICAgcm93RWxlbXMubmFtZUNoYW5nZUVsZW0udmFsdWUgPSBhZC5uYW1lO1xuICAgICAgICBzZXRRdWlsbEVkaXRvclZhbHVlKHJvd0VsZW1zLmRlc2NyaXB0aW9uQ2hhbmdlRWxlbSwgYWQuZGVzY3JpcHRpb24pO1xuICAgICAgICByb3dFbGVtcy55ZWFyQ2hhbmdlRWxlbS52YWx1ZSA9IGFkLnllYXIgKyBcIlwiO1xuXG4gICAgICAgIHJvdy5kYXRhc2V0LmlzQmxvY2sgPSBhZC5pc19ibG9jayA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuICAgICAgICBpZiAoYWQuaXNfYmxvY2spIHtcbiAgICAgICAgICAgIHJvd0VsZW1zLmJ0bkJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoXCJwaS1sb2NrXCIpO1xuICAgICAgICAgICAgcm93RWxlbXMuYnRuQmxvY2suY2xhc3NMaXN0LmFkZChcInBpLXVubG9ja1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJvd0VsZW1zLmJ0bkJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoXCJwaS11bmxvY2tcIik7XG4gICAgICAgICAgICByb3dFbGVtcy5idG5CbG9jay5jbGFzc0xpc3QuYWRkKFwicGktbG9ja1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjdXJyZW50T3JkZXIgPSBudWxsO1xuICAgICAgICBsZXQgb2xkT3JkZXIgPSBhZC5vcmRlcjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gcm93cy5sZW5ndGg7IGkrKykgaWYgKHJvd3NbaV0gPT09IHJvdykge1xuICAgICAgICAgICAgY3VycmVudE9yZGVyID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50T3JkZXIgPiBvbGRPcmRlcikge1xuICAgICAgICAgICAgcm93LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHJvdywgcm93c1tvbGRPcmRlciAtIDFdKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50T3JkZXIgPCBvbGRPcmRlcikge1xuICAgICAgICAgICAgcm93LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHJvdywgcm93c1tvbGRPcmRlciAtIDFdLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSByb3cucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChyb3cpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBvbkRlbGV0ZUJ0bkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgaWYgKCFjb25maXJtKFwi0KXQvtGA0L7RiNC+INC/0L7QtNGD0LzQsNC70Lg/XCIpKSByZXR1cm47XG4gICAgY29uc3Qgcm93ID0gZ2V0QnV0dG9uc1JvdyhldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50KTtcbiAgICBjb25zdCByb3dFbGVtcyA9IGdldFJvd0VsZW1zKHJvdyk7XG4gICAgYXdhaXQgZmV0Y2goYmFja2VuZEFkZHJlc3MgKyBcIi9hcGkvYWR2ZXJ0aXNpbmcvZGVsZXRlLnBocD9pZD1cIiArIHJvd0VsZW1zLmlkLmlubmVyVGV4dCwgeyBtZXRob2Q6IFwiZGVsZXRlXCIgfSk7XG4gICAgYWR2ZXJ0aXNpbmdzID0gYWR2ZXJ0aXNpbmdzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCAhPT0gK3Jvd0VsZW1zLmlkLmlubmVyVGV4dCk7XG4gICAgY29uc3Qgcm93T3JkZXIgPSArcm93LmRhdGFzZXQub3JkZXI7XG4gICAgcm93LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQocm93KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIGlmICgrcm93c1tpXS5kYXRhc2V0Lm9yZGVyID4gcm93T3JkZXIpIHtcbiAgICAgICAgcm93c1tpXS5kYXRhc2V0Lm9yZGVyID0gK3Jvd3NbaV0uZGF0YXNldC5vcmRlciAtIDEgKyBcIlwiO1xuICAgIH1cbiAgICBmb3IgKGxldCBpdGVtIG9mIGFkdmVydGlzaW5ncykgaWYgKGl0ZW0ub3JkZXIgPiByb3dPcmRlcikgaXRlbS5vcmRlci0tO1xufVxuXG5hc3luYyBmdW5jdGlvbiBvblNhdmVCdG5DbGljayhldmVudDogTW91c2VFdmVudCkge1xuICAgIGNvbnN0IHJvdyA9IGdldEJ1dHRvbnNSb3coZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudCk7XG4gICAgY29uc3Qgcm93RWxlbXMgPSBnZXRSb3dFbGVtcyhyb3cpO1xuICAgIGxldCBuZXdPcmRlcjogbnVtYmVyO1xuICAgIGxldCBvbGRPcmRlcjogbnVtYmVyO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgaWYgKHJvd3NbaV0gPT09IHJvdykge1xuICAgICAgICBuZXdPcmRlciA9IGkgKyAxO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgZm9yIChsZXQgaXRlbSBvZiBhZHZlcnRpc2luZ3MpIGlmIChpdGVtLmlkID09PSArcm93RWxlbXMuaWQuaW5uZXJUZXh0KSB7XG4gICAgICAgIG9sZE9yZGVyID0gaXRlbS5vcmRlcjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmICghb2xkT3JkZXIpIHtcbiAgICAgICAgb2xkT3JkZXIgPSBhZHZlcnRpc2luZ3MubGVuZ3RoICsgMTtcbiAgICB9XG4gICAgbGV0IGNoYW5nZWRBZElkID0gbnVsbDtcbiAgICBpZiAocm93RWxlbXMuaWQuaW5uZXJUZXh0KSB7XG4gICAgICAgIGNoYW5nZWRBZElkID0gK3Jvd0VsZW1zLmlkLmlubmVyVGV4dDtcbiAgICAgICAgY29uc3QgY2hhbmdlZEFkOiBBZHZlcnRpc2luZyA9IHtcbiAgICAgICAgICAgIGlkOiArcm93RWxlbXMuaWQuaW5uZXJUZXh0LFxuICAgICAgICAgICAgbmFtZTogcm93RWxlbXMubmFtZUNoYW5nZUVsZW0udmFsdWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZ2V0UXVpbGxFZGl0b3JWYWx1ZShyb3dFbGVtcy5kZXNjcmlwdGlvbkNoYW5nZUVsZW0pLFxuICAgICAgICAgICAgeWVhcjogK3Jvd0VsZW1zLnllYXJDaGFuZ2VFbGVtLnZhbHVlLFxuICAgICAgICAgICAgaW1nX2ZpbGVfbmFtZTogXCJcIixcbiAgICAgICAgICAgIGlzX2Jsb2NrOiByb3cuZGF0YXNldC5pc0Jsb2NrID09PSBcInRydWVcIiA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICAgIG9yZGVyOiBuZXdPcmRlcixcbiAgICAgICAgICAgIG5ld0ltZzogZ2V0TmV3SW5wdXRJbWdWYWx1ZShyb3dFbGVtcy5pbnB1dEltZylcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBmZXRjaChiYWNrZW5kQWRkcmVzcyArIGAvYXBpL2FkdmVydGlzaW5nL2NoYW5nZS5waHBgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwicHV0XCIsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjaGFuZ2VkQWQpXG4gICAgICAgIH0pO1xuICAgICAgICBhZHZlcnRpc2luZ3MgPSBhZHZlcnRpc2luZ3MubWFwKChpdGVtKSA9PiBpdGVtLmlkID09PSBjaGFuZ2VkQWQuaWQgPyBjaGFuZ2VkQWQgOiBpdGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBuZXdBZDogQWR2ZXJ0aXNpbmcgPSB7XG4gICAgICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgICAgIG5hbWU6IHJvd0VsZW1zLm5hbWVDaGFuZ2VFbGVtLnZhbHVlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGdldFF1aWxsRWRpdG9yVmFsdWUocm93RWxlbXMuZGVzY3JpcHRpb25DaGFuZ2VFbGVtKSxcbiAgICAgICAgICAgIHllYXI6ICtyb3dFbGVtcy55ZWFyQ2hhbmdlRWxlbS52YWx1ZSxcbiAgICAgICAgICAgIGltZ19maWxlX25hbWU6IFwiXCIsXG4gICAgICAgICAgICBpc19ibG9jazogcm93LmRhdGFzZXQuaXNCbG9jayA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICBvcmRlcjogbmV3T3JkZXIsXG4gICAgICAgICAgICBuZXdJbWc6IGdldE5ld0lucHV0SW1nVmFsdWUocm93RWxlbXMuaW5wdXRJbWcpXG4gICAgICAgIH1cbiAgICAgICAgbmV3QWQuaWQgPSBhd2FpdCAoYXdhaXQgZmV0Y2goYmFja2VuZEFkZHJlc3MgKyBgL2FwaS9hZHZlcnRpc2luZy9hZGQucGhwYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcInBvc3RcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5ld0FkKVxuICAgICAgICB9KSkuanNvbigpO1xuICAgICAgICBjaGFuZ2VkQWRJZCA9IG5ld0FkLmlkO1xuICAgICAgICByb3dFbGVtcy5pZC5pbm5lclRleHQgPSBcIlwiICsgbmV3QWQuaWQ7XG4gICAgICAgIGFkdmVydGlzaW5ncy5wdXNoKG5ld0FkKTtcbiAgICB9XG4gICAgcm93RWxlbXMubmFtZVZhbHVlLmlubmVyVGV4dCA9IHJvd0VsZW1zLm5hbWVDaGFuZ2VFbGVtLnZhbHVlO1xuICAgIHJvd0VsZW1zLnllYXJWYWx1ZS5pbm5lclRleHQgPSByb3dFbGVtcy55ZWFyQ2hhbmdlRWxlbS52YWx1ZTtcbiAgICBpZiAobmV3T3JkZXIgPiBvbGRPcmRlcikge1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGFkdmVydGlzaW5ncykgaWYgKGl0ZW0ub3JkZXIgPiBvbGRPcmRlciAmJiBpdGVtLm9yZGVyIDw9IG5ld09yZGVyICYmIGl0ZW0uaWQgIT09IGNoYW5nZWRBZElkKSB7XG4gICAgICAgICAgICBpdGVtLm9yZGVyLS07XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5ld09yZGVyIDwgb2xkT3JkZXIpIHtcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBhZHZlcnRpc2luZ3MpIGlmIChpdGVtLm9yZGVyIDwgb2xkT3JkZXIgJiYgaXRlbS5vcmRlciA+PSBuZXdPcmRlciAmJiBpdGVtLmlkICE9PSBjaGFuZ2VkQWRJZCkge1xuICAgICAgICAgICAgaXRlbS5vcmRlcisrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKFwiX2NoYW5nZWRcIik7XG59XG5cbmZ1bmN0aW9uIG9uQmxvY2tCdG5DbGljayhldmVudDogTW91c2VFdmVudCkge1xuICAgIGNvbnN0IGJ0biA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgY29uc3Qgcm93ID0gZ2V0QnV0dG9uc1JvdyhidG4pO1xuICAgIHJvdy5kYXRhc2V0LmlzQmxvY2sgPSByb3cuZGF0YXNldC5pc0Jsb2NrID09PSBcInRydWVcIiA/IFwiZmFsc2VcIiA6IFwidHJ1ZVwiO1xuICAgIGlmIChyb3cuZGF0YXNldC5pc0Jsb2NrID09PSBcInRydWVcIikge1xuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcInBpLWxvY2tcIik7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwicGktdW5sb2NrXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwicGktdW5sb2NrXCIpO1xuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcInBpLWxvY2tcIik7XG4gICAgfVxufVxuXG5jbGFzcyBBZHZlcnRpc2luZyB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgeWVhcjogbnVtYmVyO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgaW1nX2ZpbGVfbmFtZTogc3RyaW5nO1xuICAgIGlzX2Jsb2NrOiBib29sZWFuO1xuICAgIG9yZGVyOiBudW1iZXI7XG4gICAgbmV3SW1nPzogc3RyaW5nO1xufSJdLCJzb3VyY2VSb290IjoiIn0=