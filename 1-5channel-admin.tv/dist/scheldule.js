!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return s}));var r="http://1-5channel.tv",i="/files/images/";function o(t){return t.firstElementChild.innerHTML}function l(t,e){return t.firstElementChild.innerHTML=e}function s(t){new Quill(t,{theme:"snow",modules:{toolbar:[[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{script:"sub"},{script:"super"},{color:[]},"clean"]]}})}},,,function(t,e,n){t.exports=n.p+"scheldule.css"},,,function(t,e,n){"use strict";n.r(e);n(3);var r=function(){function t(t,e,n,r){var i=this;this.valuesList=e,this.currentValue=n,this.findField=r,this.html={},this.html.root=t,this.html.root.classList.add("input-find"),this.html.root.innerHTML="",this.html.input=document.createElement("input"),this.html.input.value=this.currentValue?this.currentValue[this.findField]:"",this.html.valuesContainer=document.createElement("div"),this.html.valuesContainer.classList.add("input-find__values-container"),this.html.input.addEventListener("input",this.displayFindRezults.bind(this));var o=function(t){i.html.root.contains(t.target)||(document.removeEventListener("mousedown",o),i.html.valuesContainer.classList.remove("_visible"),i.html.input.value=i.currentValue?i.currentValue[i.findField]:"")};this.html.input.addEventListener("focus",(function(){document.addEventListener("mousedown",o),i.displayFindRezults()})),this.html.valuesContainer.addEventListener("click",this.onSelectValue.bind(this,o)),this.html.root.appendChild(this.html.input),this.html.root.appendChild(this.html.valuesContainer)}return t.prototype.find=function(){var t=this,e=this.html.input.value.split(/[\s.,-]+/i).filter((function(t,e,n){return!(t.length<2||n.lastIndexOf(t)>e)}));if(0===e.length)return[];var n=this.valuesList.map((function(n,r){for(var i={value:n,wordsQuantity:0,arrIdx:r},o=0,l=e;o<l.length;o++){var s=l[o];new RegExp("^"+s+"[\\s.,-]+|[\\s.,-]+"+s+"[\\s.,-]+|[\\s.,-]+"+s+"$","i").test(n[t.findField])&&i.wordsQuantity++}return i})).filter((function(t){return t.wordsQuantity>0}));return n.sort((function(t,e){return e.wordsQuantity-t.wordsQuantity})),n},t.prototype.displayFindRezults=function(){this.html.valuesContainer.innerHTML="";for(var t=0,e=this.find();t<e.length;t++){var n=e[t],r=document.createElement("div");r.dataset.valueArrIdx=n.arrIdx+"",r.innerText=n.value[this.findField],r.classList.add("input-find__values-item"),this.html.valuesContainer.appendChild(r)}this.html.valuesContainer.classList.add("_visible"),this.html.valuesContainer.scrollTop=0},t.prototype.onSelectValue=function(t){document.removeEventListener("mousedown",t);var e=event.target;e.classList.contains("input-find__values-item")&&(this.currentValue=this.valuesList[+e.dataset.valueArrIdx],this.html.input.value=this.currentValue[this.findField],this.html.valuesContainer.classList.remove("_visible"),this.html.root.dispatchEvent(new CustomEvent("inputFindChange",{detail:{value:this.currentValue}})))},t}(),i=n(0);new(function(){function t(){this.programs=[],this.schelduleItems=[],this.rows=[];var t=document.getElementsByClassName("scheldule-crud-container")[0];this.html={root:t,addBtn:t.querySelector(".table__btn._add"),saveBtn:t.querySelector(".table__btn._save"),cancelBtn:t.querySelector(".table__btn._cancel"),dateInput:t.getElementsByClassName("date-input")[0],rowsContainer:t.getElementsByClassName("table__body")[0]},this.html.addBtn.addEventListener("click",this.onAddBtnClick.bind(this)),this.html.cancelBtn.addEventListener("click",this.onCancelBtnClick.bind(this)),this.html.saveBtn.addEventListener("click",this.onSaveBtnClick.bind(this)),this.html.dateInput.value=(new Date).getFullYear()+"-"+(new Date).getMonth()+"-"+(new Date).getDate(),this.html.dateInput.addEventListener("change",this.onDateChange.bind(this)),this.onDateChange()}return t.prototype.onDateChange=function(){var t=this;if(this.html.dateInput.value){var e=fetch(i.a+"/api/program/getAll.php").then((function(t){return t.json()})),n=fetch(i.a+"/api/scheldule/getAll.php?date="+ +new Date(this.html.dateInput.value)).then((function(t){return t.json()}));Promise.all([e,n]).then((function(e){t.programs=e[0],t.schelduleItems=e[1],t.html.rowsContainer.innerHTML="";for(var n=function(e){e.program=t.programs.find((function(t){return t.id===e.program_id})),t.addRow(e)},r=0,i=t.schelduleItems;r<i.length;r++){n(i[r])}t.setAllRowsTime()}))}},t.prototype.addRow=function(t){this.html.rowsContainer.insertAdjacentHTML("beforeend",'<div class="table__row" data-scheldule-id="'+t.id+'">\n                <div class="table__content-cells-container">\n                    <div class="table__cell _time">\n                        <div class="table__cell-value"></div>\n                    </div>\n                    <div class="table__cell _program-name">\n                        <div class="table__cell-change-elem"></div>\n                    </div>\n                    <div class="table__cell _program-duration">\n                        <div class="table__cell-value">\n                            '+(t.program?this.convertDuration(t.program.duration).str:"0мин.")+'\n                        </div>\n                    </div>\n                </div>\n                <div class="table__cell _btns">\n                    <button class="pi pi-arrow-up table__btn _order-minus"></button>\n                    <button class="pi pi-arrow-down table__btn _order-plus"></button>\n                    <button class="pi pi-trash table__btn _delete"></button>\n                </div>\n            </div>');var e=this.html.rowsContainer.lastElementChild,n={html:{root:e,timeValue:e.querySelector(".table__cell._time .table__cell-value"),programNameChangeElem:e.querySelector(".table__cell._program-name .table__cell-change-elem"),programDurationValue:e.querySelector(".table__cell._program-duration .table__cell-value"),btnOrderPlus:e.querySelector(".table__btn._order-plus"),btnOrderMinus:e.querySelector(".table__btn._order-minus"),btnDelete:e.querySelector(".table__btn._delete")},value:t};this.rows.push(n),new r(n.html.programNameChangeElem,this.programs,t.program,"name"),n.html.programNameChangeElem.addEventListener("inputFindChange",this.onSelectProgram.bind(this,n)),n.html.btnDelete.addEventListener("click",this.onDeleteBtnClick.bind(this,n)),n.html.btnOrderPlus.addEventListener("click",this.onOrderPlusBtnClick.bind(this,n)),n.html.btnOrderMinus.addEventListener("click",this.onOrderMinusBtnClick.bind(this,n))},t.prototype.onSaveBtnClick=function(){this.html.root.classList.remove("_changed")},t.prototype.onCancelBtnClick=function(){this.html.root.classList.remove("_changed")},t.prototype.onAddBtnClick=function(){this.html.root.classList.add("_changed");var t={date:+new Date(this.html.dateInput.value),order:this.rows.length+1,program_id:null,program:null,id:null};this.schelduleItems.push(t),this.addRow(t),this.setLastRowTime(),this.html.rowsContainer.scrollTop=this.html.rowsContainer.scrollHeight},t.prototype.onSelectProgram=function(t){this.html.root.classList.add("_changed");for(var e=event.detail.value,n=0,r=this.rows;n<r.length;n++){var i=r[n];i.value.order>t.value.order&&(t.value.program&&this.rowTimeMinus(i,t.value.program.duration),this.rowTimePlus(i,e.duration))}t.value.program=e,t.value.program_id=e.id,t.html.programDurationValue.innerText=this.convertDuration(e.duration).str},t.prototype.onOrderPlusBtnClick=function(t){var e=this.rows.findIndex((function(e){return e.value.id===t.value.id}));if(e<this.rows.length-2?t.html.root.parentElement.insertBefore(t.html.root,this.rows[e+2].html.root):e<this.rows.length-1&&t.html.root.parentElement.appendChild(t.html.root),e<this.rows.length-1){this.html.root.classList.add("_changed");var n=this.rows[e+1];this.rows[e+1]=t,this.rows[e]=n,t.value.order++,n.value.order--,n.value.program&&this.rowTimePlus(t,n.value.program.duration),t.value.program&&this.rowTimeMinus(n,t.value.program.duration)}},t.prototype.onOrderMinusBtnClick=function(t){var e=this.rows.findIndex((function(e){return e===t}));if(e>0){this.html.root.classList.add("_changed");var n=this.rows[e-1];t.html.root.parentElement.insertBefore(t.html.root,n.html.root),this.rows[e-1]=t,this.rows[e]=n,t.value.order--,n.value.order++,n.value.program&&this.rowTimeMinus(t,n.value.program.duration),t.value.program&&this.rowTimePlus(n,t.value.program.duration)}},t.prototype.onDeleteBtnClick=function(t){if(!t.value.program||confirm("Хорошо подумали?")){this.html.root.classList.add("_changed"),t.html.root.parentElement.removeChild(t.html.root),this.rows.splice(this.rows.findIndex((function(e){return e===t})),1);for(var e=0,n=this.rows;e<n.length;e++){var r=n[e];r.value.order>t.value.order&&(r.value.order--,t.value.program&&this.rowTimeMinus(r,t.value.program.duration))}}},t.prototype.convertDuration=function(t){var e=Math.floor(t/36e5),n=Math.floor((t-36e5*e)/6e4);return{hours:e,mins:n,str:(e>0?e+"ч. ":"")+(n>0||0===e?n+"мин.":"")}},t.prototype.setAllRowsTime=function(){for(var t={hours:0,minutes:0},e=0,n=this.rows;e<n.length;e++){var r=n[e];for(r.html.timeValue.innerText=(t.hours<10?"0":"")+t.hours+":"+(t.minutes<10?"0":"")+t.minutes,t.minutes+=Math.round(r.value.program.duration/6e4);t.minutes>59;)t.minutes-=60,t.hours++}},t.prototype.setLastRowTime=function(){var t=this.rows[this.rows.length-2],e=t.html.timeValue.innerText.split(":"),n={hours:+e[0],minutes:+e[1]};for(n.minutes+=Math.round((t.value.program?t.value.program.duration:0)/6e4);n.minutes>59;)n.minutes-=60,n.hours++;this.rows[this.rows.length-1].html.timeValue.innerText=(n.hours<10?"0":"")+n.hours+":"+(n.minutes<10?"0":"")+n.minutes},t.prototype.rowTimePlus=function(t,e){var n=t.html.timeValue.innerText.split(":"),r={hours:+n[0],minutes:+n[1]};for(r.minutes+=Math.round(e/6e4);r.minutes>59;)r.minutes-=60,r.hours++;t.html.timeValue.innerText=(r.hours<10?"0":"")+r.hours+":"+(r.minutes<10?"0":"")+r.minutes},t.prototype.rowTimeMinus=function(t,e){var n=t.html.timeValue.innerText.split(":"),r={hours:+n[0],minutes:+n[1]};for(r.minutes-=Math.round(e/6e4);r.minutes<0;)r.minutes+=60,r.hours--;t.html.timeValue.innerText=(r.hours<10?"0":"")+r.hours+":"+(r.minutes<10?"0":"")+r.minutes},t}())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc2VydmljZXMvY29tbW9uLnRzIiwid2VicGFjazovLy8uL3BhZ2VzL3NjaGVsZHVsZS9zY2hlbGR1bGUuc2NzcyIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2lucHV0LWZpbmQvaW5wdXQtZmluZC50cyIsIndlYnBhY2s6Ly8vLi9wYWdlcy9zY2hlbGR1bGUvc2NoZWxkdWxlLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiYmFja2VuZEFkZHJlc3MiLCJpbWFnZXNVcmxSb290IiwiZ2V0UXVpbGxFZGl0b3JWYWx1ZSIsInF1aWxsRWRpdG9yRWxlbSIsImZpcnN0RWxlbWVudENoaWxkIiwiaW5uZXJIVE1MIiwic2V0UXVpbGxFZGl0b3JWYWx1ZSIsImNyZWF0ZVN0YW5kYXJ0UXVpbGxFZGl0b3IiLCJlbGVtIiwiUXVpbGwiLCJ0aGVtZSIsInRvb2xiYXIiLCJlbGVtZW50IiwidmFsdWVzTGlzdCIsImN1cnJlbnRWYWx1ZSIsImZpbmRGaWVsZCIsImh0bWwiLCJ0aGlzIiwicm9vdCIsImNsYXNzTGlzdCIsImFkZCIsImlucHV0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidmFsdWVzQ29udGFpbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BsYXlGaW5kUmV6dWx0cyIsInZpc2libGVMaXN0ZW5uZXIiLCJldmVudCIsImNvbnRhaW5zIiwidGFyZ2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsIm9uU2VsZWN0VmFsdWUiLCJhcHBlbmRDaGlsZCIsImZpbmQiLCJ3b3JkcyIsInNwbGl0IiwiZmlsdGVyIiwiaXRlbSIsImlkeCIsImFyciIsImxlbmd0aCIsImxhc3RJbmRleE9mIiwicmV6dWx0IiwibWFwIiwibmV3SXRlbSIsIndvcmRzUXVhbnRpdHkiLCJhcnJJZHgiLCJ3b3JkIiwiUmVnRXhwIiwidGVzdCIsInNvcnQiLCJpdGVtMSIsIml0ZW0yIiwiaHRtbEl0ZW0iLCJkYXRhc2V0IiwidmFsdWVBcnJJZHgiLCJpbm5lclRleHQiLCJzY3JvbGxUb3AiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJwcm9ncmFtcyIsInNjaGVsZHVsZUl0ZW1zIiwicm93cyIsImNvbXBSb290IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImFkZEJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJzYXZlQnRuIiwiY2FuY2VsQnRuIiwiZGF0ZUlucHV0Iiwicm93c0NvbnRhaW5lciIsIm9uQWRkQnRuQ2xpY2siLCJvbkNhbmNlbEJ0bkNsaWNrIiwib25TYXZlQnRuQ2xpY2siLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJvbkRhdGVDaGFuZ2UiLCJwcjEiLCJmZXRjaCIsInRoZW4iLCJyZXNwIiwianNvbiIsInByMiIsIlByb21pc2UiLCJhbGwiLCJkYXRhIiwicHJvZ3JhbSIsImlkIiwicHJvZ3JhbV9pZCIsImFkZFJvdyIsInNldEFsbFJvd3NUaW1lIiwic2NoZWxkdWxlSXRlbSIsImluc2VydEFkamFjZW50SFRNTCIsImNvbnZlcnREdXJhdGlvbiIsImR1cmF0aW9uIiwic3RyIiwibmV3Um93SHRtbCIsImxhc3RFbGVtZW50Q2hpbGQiLCJuZXdSb3ciLCJ0aW1lVmFsdWUiLCJwcm9ncmFtTmFtZUNoYW5nZUVsZW0iLCJwcm9ncmFtRHVyYXRpb25WYWx1ZSIsImJ0bk9yZGVyUGx1cyIsImJ0bk9yZGVyTWludXMiLCJidG5EZWxldGUiLCJwdXNoIiwiSW5wdXRGaW5kIiwib25TZWxlY3RQcm9ncmFtIiwib25EZWxldGVCdG5DbGljayIsIm9uT3JkZXJQbHVzQnRuQ2xpY2siLCJvbk9yZGVyTWludXNCdG5DbGljayIsIm5ld1NoZWxkdWxlSXRlbSIsImRhdGUiLCJvcmRlciIsInNldExhc3RSb3dUaW1lIiwic2Nyb2xsSGVpZ2h0Iiwicm93IiwibmV3UHJvZ3JhbSIsInJvd1RpbWVNaW51cyIsInJvd1RpbWVQbHVzIiwicm93QXJySWR4IiwiZmluZEluZGV4IiwicGFyZW50RWxlbWVudCIsImluc2VydEJlZm9yZSIsIm5leHRSb3ciLCJwcmV2aW91c1JvdyIsImNvbmZpcm0iLCJyZW1vdmVDaGlsZCIsInNwbGljZSIsImhvdXJzIiwiTWF0aCIsImZsb29yIiwibWlucyIsInRpbWUiLCJtaW51dGVzIiwicm91bmQiLCJ0aW1lQXJyIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0Jr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QVVyQixNQUFNLEtBQzdDcUcsRUFBTyxDQUNUSixPQUFRTyxFQUFRLEdBQ2hCRixTQUFVRSxFQUFRLElBR3RCLElBREFILEVBQUtDLFNBQVdKLEtBQUtLLE1BQU16QyxFQUFXLEtBQy9CdUMsRUFBS0MsUUFBVSxHQUNsQkQsRUFBS0MsU0FBVyxHQUNoQkQsRUFBS0osUUFFVGIsRUFBSXpHLEtBQUt3RixVQUFVOUMsV0FBZ0JnRixFQUFLSixNQUFRLEdBQUssSUFBTSxJQUFNSSxFQUFLSixNQUFLLEtBQUtJLEVBQUtDLFFBQVUsR0FBSyxJQUFNLElBQU1ELEVBQUtDLFNBRTdILEVBM1BBIiwiZmlsZSI6InNjaGVsZHVsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA2KTtcbiIsImRlY2xhcmUgbGV0IFF1aWxsO1xuXG5leHBvcnQgY29uc3QgYmFja2VuZEFkZHJlc3MgPSBcImh0dHA6Ly8xLTVjaGFubmVsLnR2XCI7XG5leHBvcnQgY29uc3QgaW1hZ2VzVXJsUm9vdCA9IFwiL2ZpbGVzL2ltYWdlcy9cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFF1aWxsRWRpdG9yVmFsdWUocXVpbGxFZGl0b3JFbGVtOiBIVE1MRWxlbWVudCkge1xuICAgIHJldHVybiBxdWlsbEVkaXRvckVsZW0uZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0UXVpbGxFZGl0b3JWYWx1ZShxdWlsbEVkaXRvckVsZW06IEhUTUxFbGVtZW50LCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHF1aWxsRWRpdG9yRWxlbS5maXJzdEVsZW1lbnRDaGlsZC5pbm5lckhUTUwgPSB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0YW5kYXJ0UXVpbGxFZGl0b3IoZWxlbTogSFRNTEVsZW1lbnQpIHtcbiAgICBuZXcgUXVpbGwoZWxlbSwge1xuICAgICAgICB0aGVtZTogJ3Nub3cnLFxuICAgICAgICBtb2R1bGVzOiB7XG4gICAgICAgICAgICB0b29sYmFyOiBbXG4gICAgICAgICAgICAgICAgW3sgJ3NpemUnOiBbJ3NtYWxsJywgZmFsc2UsICdsYXJnZScsICdodWdlJ10gfV0sXG4gICAgICAgICAgICAgICAgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnc3RyaWtlJ10sXG4gICAgICAgICAgICAgICAgW3sgJ3NjcmlwdCc6ICdzdWInIH0sIHsgJ3NjcmlwdCc6ICdzdXBlcicgfSwgeyAnY29sb3InOiBbXSB9LCAnY2xlYW4nXSxcbiAgICAgICAgICAgIF0sXG5cbiAgICAgICAgfVxuICAgIH0pO1xufSIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcInNjaGVsZHVsZS5jc3NcIjsiLCJleHBvcnQgY2xhc3MgSW5wdXRGaW5kPEl0ZW1UeXBlPiB7XG5cbiAgICBwcml2YXRlIGh0bWw6IHtcbiAgICAgICAgcm9vdD86IEhUTUxFbGVtZW50O1xuICAgICAgICBpbnB1dD86IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIHZhbHVlc0NvbnRhaW5lcj86IEhUTUxFbGVtZW50O1xuICAgIH0gPSB7fVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgICBwcml2YXRlIHZhbHVlc0xpc3Q6IEl0ZW1UeXBlW10sXG4gICAgICAgIHByaXZhdGUgY3VycmVudFZhbHVlOiBJdGVtVHlwZSB8IG51bGwsXG4gICAgICAgIHByaXZhdGUgZmluZEZpZWxkOiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgdGhpcy5odG1sLnJvb3QgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmh0bWwucm9vdC5jbGFzc0xpc3QuYWRkKFwiaW5wdXQtZmluZFwiKTtcbiAgICAgICAgdGhpcy5odG1sLnJvb3QuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGhpcy5odG1sLmlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICB0aGlzLmh0bWwuaW5wdXQudmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZSA/IHRoaXMuY3VycmVudFZhbHVlW3RoaXMuZmluZEZpZWxkXSA6IFwiXCI7XG4gICAgICAgIHRoaXMuaHRtbC52YWx1ZXNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmh0bWwudmFsdWVzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJpbnB1dC1maW5kX192YWx1ZXMtY29udGFpbmVyXCIpO1xuXG4gICAgICAgIHRoaXMuaHRtbC5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGhpcy5kaXNwbGF5RmluZFJlenVsdHMuYmluZCh0aGlzKSk7XG4gICAgICAgIGNvbnN0IHZpc2libGVMaXN0ZW5uZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5odG1sLnJvb3QuY29udGFpbnMoZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdmlzaWJsZUxpc3Rlbm5lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5odG1sLnZhbHVlc0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiX3Zpc2libGVcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5odG1sLmlucHV0LnZhbHVlID0gdGhpcy5jdXJyZW50VmFsdWUgPyB0aGlzLmN1cnJlbnRWYWx1ZVt0aGlzLmZpbmRGaWVsZF0gOiBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmh0bWwuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdmlzaWJsZUxpc3Rlbm5lcilcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUZpbmRSZXp1bHRzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmh0bWwudmFsdWVzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uU2VsZWN0VmFsdWUuYmluZCh0aGlzLCB2aXNpYmxlTGlzdGVubmVyKSk7XG5cbiAgICAgICAgdGhpcy5odG1sLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy5odG1sLmlucHV0KTtcbiAgICAgICAgdGhpcy5odG1sLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy5odG1sLnZhbHVlc0NvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaW5kKCkge1xuICAgICAgICBjb25zdCB3b3JkcyA9IHRoaXMuaHRtbC5pbnB1dC52YWx1ZS5zcGxpdCgvW1xccy4sLV0rL2kpLmZpbHRlcigoaXRlbSwgaWR4LCBhcnIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhKGl0ZW0ubGVuZ3RoIDwgMiB8fCBhcnIubGFzdEluZGV4T2YoaXRlbSkgPiBpZHgpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuXG4gICAgICAgIGxldCByZXp1bHQgPSB0aGlzLnZhbHVlc0xpc3QubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7IHZhbHVlOiBpdGVtLCB3b3Jkc1F1YW50aXR5OiAwLCBhcnJJZHg6IGlkeCB9O1xuICAgICAgICAgICAgZm9yIChsZXQgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICAgICAgICAgIGlmICgobmV3IFJlZ0V4cChgXiR7d29yZH1bXFxcXHMuLC1dK3xbXFxcXHMuLC1dKyR7d29yZH1bXFxcXHMuLC1dK3xbXFxcXHMuLC1dKyR7d29yZH0kYCwgXCJpXCIpKS50ZXN0KGl0ZW1bdGhpcy5maW5kRmllbGRdKSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdJdGVtLndvcmRzUXVhbnRpdHkrK1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3SXRlbTtcbiAgICAgICAgfSkuZmlsdGVyKChpdGVtKSA9PiBpdGVtLndvcmRzUXVhbnRpdHkgPiAwKTtcbiAgICAgICAgcmV6dWx0LnNvcnQoKGl0ZW0xLCBpdGVtMikgPT4gaXRlbTIud29yZHNRdWFudGl0eSAtIGl0ZW0xLndvcmRzUXVhbnRpdHkpO1xuICAgICAgICByZXR1cm4gcmV6dWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgZGlzcGxheUZpbmRSZXp1bHRzKCkge1xuICAgICAgICB0aGlzLmh0bWwudmFsdWVzQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGxldCB0cnVlVmFsdWVzID0gdGhpcy5maW5kKCk7XG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdHJ1ZVZhbHVlcykge1xuICAgICAgICAgICAgY29uc3QgaHRtbEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgaHRtbEl0ZW0uZGF0YXNldC52YWx1ZUFycklkeCA9IGl0ZW0uYXJySWR4ICsgXCJcIjtcbiAgICAgICAgICAgIGh0bWxJdGVtLmlubmVyVGV4dCA9IGl0ZW0udmFsdWVbdGhpcy5maW5kRmllbGRdO1xuICAgICAgICAgICAgaHRtbEl0ZW0uY2xhc3NMaXN0LmFkZChcImlucHV0LWZpbmRfX3ZhbHVlcy1pdGVtXCIpO1xuICAgICAgICAgICAgdGhpcy5odG1sLnZhbHVlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChodG1sSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5odG1sLnZhbHVlc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiX3Zpc2libGVcIik7XG4gICAgICAgIHRoaXMuaHRtbC52YWx1ZXNDb250YWluZXIuc2Nyb2xsVG9wID0gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uU2VsZWN0VmFsdWUodmlzaWJsZUxpc3Rlbm5lcikge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHZpc2libGVMaXN0ZW5uZXIpO1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaW5wdXQtZmluZF9fdmFsdWVzLWl0ZW1cIikpIHJldHVybjtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB0aGlzLnZhbHVlc0xpc3RbK2VsZW1lbnQuZGF0YXNldC52YWx1ZUFycklkeF07XG4gICAgICAgIHRoaXMuaHRtbC5pbnB1dC52YWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlW3RoaXMuZmluZEZpZWxkXTtcbiAgICAgICAgdGhpcy5odG1sLnZhbHVlc0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiX3Zpc2libGVcIik7XG4gICAgICAgIHRoaXMuaHRtbC5yb290LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiaW5wdXRGaW5kQ2hhbmdlXCIsIHsgZGV0YWlsOiB7IHZhbHVlOiB0aGlzLmN1cnJlbnRWYWx1ZSB9IH0pKTtcbiAgICB9XG59IiwiaW1wb3J0IFwiLi9zY2hlbGR1bGUuc2Nzc1wiO1xuaW1wb3J0IFwiLi4vLi4vY29tcG9uZW50cy9pbnB1dC1maW5kL2lucHV0LWZpbmRcIlxuaW1wb3J0IHsgYmFja2VuZEFkZHJlc3MgfSBmcm9tIFwiLi4vLi4vc2VydmljZXMvY29tbW9uXCI7XG5pbXBvcnQgeyBJbnB1dEZpbmQgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9pbnB1dC1maW5kL2lucHV0LWZpbmRcIlxuZXhwb3J0IHsgfTtcblxuY2xhc3MgU2NoZWxkdWxlUGFnZSB7XG4gICAgaHRtbDoge1xuICAgICAgICByb290OiBIVE1MRWxlbWVudDtcbiAgICAgICAgYWRkQnRuOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgc2F2ZUJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIGNhbmNlbEJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIGRhdGVJbnB1dDogSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgcm93c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgfTtcblxuICAgIHByb2dyYW1zOiBQcm9ncmFtW10gPSBbXTtcbiAgICBzY2hlbGR1bGVJdGVtczogU2NoZWxkdWxlSXRlbVtdID0gW107XG5cbiAgICByb3dzOiBSb3dbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IGNvbXBSb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNjaGVsZHVsZS1jcnVkLWNvbnRhaW5lclwiKVswXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgdGhpcy5odG1sID0ge1xuICAgICAgICAgICAgcm9vdDogY29tcFJvb3QsXG4gICAgICAgICAgICBhZGRCdG46IGNvbXBSb290LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2J0bi5fYWRkXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50LFxuICAgICAgICAgICAgc2F2ZUJ0bjogY29tcFJvb3QucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fYnRuLl9zYXZlXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50LFxuICAgICAgICAgICAgY2FuY2VsQnRuOiBjb21wUm9vdC5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19idG4uX2NhbmNlbFwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudCxcbiAgICAgICAgICAgIGRhdGVJbnB1dDogY29tcFJvb3QuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRhdGUtaW5wdXRcIilbMF0gYXMgSFRNTElucHV0RWxlbWVudCxcbiAgICAgICAgICAgIHJvd3NDb250YWluZXI6IGNvbXBSb290LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0YWJsZV9fYm9keVwiKVswXSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmh0bWwuYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uQWRkQnRuQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuaHRtbC5jYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMub25DYW5jZWxCdG5DbGljay5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5odG1sLnNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMub25TYXZlQnRuQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuaHRtbC5kYXRlSW5wdXQudmFsdWUgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgKyBcIi1cIiArIG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIFwiLVwiICsgbmV3IERhdGUoKS5nZXREYXRlKCk7XG4gICAgICAgIHRoaXMuaHRtbC5kYXRlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLm9uRGF0ZUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5vbkRhdGVDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICBvbkRhdGVDaGFuZ2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5odG1sLmRhdGVJbnB1dC52YWx1ZSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBwcjEgPSBmZXRjaChiYWNrZW5kQWRkcmVzcyArIGAvYXBpL3Byb2dyYW0vZ2V0QWxsLnBocGApLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKTtcbiAgICAgICAgY29uc3QgcHIyID0gZmV0Y2goXG4gICAgICAgICAgICBiYWNrZW5kQWRkcmVzcyArIGAvYXBpL3NjaGVsZHVsZS9nZXRBbGwucGhwP2RhdGU9YCArICtuZXcgRGF0ZSh0aGlzLmh0bWwuZGF0ZUlucHV0LnZhbHVlKVxuICAgICAgICApLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKTtcblxuICAgICAgICBQcm9taXNlLmFsbChbcHIxLCBwcjJdKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByb2dyYW1zID0gZGF0YVswXTtcbiAgICAgICAgICAgIHRoaXMuc2NoZWxkdWxlSXRlbXMgPSBkYXRhWzFdO1xuXG4gICAgICAgICAgICB0aGlzLmh0bWwucm93c0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLnNjaGVsZHVsZUl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5wcm9ncmFtID0gdGhpcy5wcm9ncmFtcy5maW5kKChpdGVtMikgPT4gaXRlbTIuaWQgPT09IGl0ZW0ucHJvZ3JhbV9pZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSb3coaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEFsbFJvd3NUaW1lKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFkZFJvdyhzY2hlbGR1bGVJdGVtOiBTY2hlbGR1bGVJdGVtKSB7XG4gICAgICAgIHRoaXMuaHRtbC5yb3dzQ29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLFxuICAgICAgICAgICAgYDxkaXYgY2xhc3M9XCJ0YWJsZV9fcm93XCIgZGF0YS1zY2hlbGR1bGUtaWQ9XCIke3NjaGVsZHVsZUl0ZW0uaWR9XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlX19jb250ZW50LWNlbGxzLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwgX3RpbWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZV9fY2VsbC12YWx1ZVwiPiR7XCJcIn08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZV9fY2VsbCBfcHJvZ3JhbS1uYW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwtY2hhbmdlLWVsZW1cIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZV9fY2VsbCBfcHJvZ3JhbS1kdXJhdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlX19jZWxsLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzY2hlbGR1bGVJdGVtLnByb2dyYW0gPyB0aGlzLmNvbnZlcnREdXJhdGlvbihzY2hlbGR1bGVJdGVtLnByb2dyYW0uZHVyYXRpb24pLnN0ciA6IFwiMNC80LjQvS5cIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFibGVfX2NlbGwgX2J0bnNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBpIHBpLWFycm93LXVwIHRhYmxlX19idG4gX29yZGVyLW1pbnVzXCI+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwaSBwaS1hcnJvdy1kb3duIHRhYmxlX19idG4gX29yZGVyLXBsdXNcIj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBpIHBpLXRyYXNoIHRhYmxlX19idG4gX2RlbGV0ZVwiPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBuZXdSb3dIdG1sID0gdGhpcy5odG1sLnJvd3NDb250YWluZXIubGFzdEVsZW1lbnRDaGlsZCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgbmV3Um93ID0ge1xuICAgICAgICAgICAgaHRtbDoge1xuICAgICAgICAgICAgICAgIHJvb3Q6IG5ld1Jvd0h0bWwsXG4gICAgICAgICAgICAgICAgdGltZVZhbHVlOiBuZXdSb3dIdG1sLnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2NlbGwuX3RpbWUgLnRhYmxlX19jZWxsLXZhbHVlXCIpIGFzIEhUTUxFbGVtZW50LFxuICAgICAgICAgICAgICAgIHByb2dyYW1OYW1lQ2hhbmdlRWxlbTogbmV3Um93SHRtbC5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19jZWxsLl9wcm9ncmFtLW5hbWUgLnRhYmxlX19jZWxsLWNoYW5nZS1lbGVtXCIpIGFzIEhUTUxFbGVtZW50LFxuICAgICAgICAgICAgICAgIHByb2dyYW1EdXJhdGlvblZhbHVlOiBuZXdSb3dIdG1sLnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2NlbGwuX3Byb2dyYW0tZHVyYXRpb24gLnRhYmxlX19jZWxsLXZhbHVlXCIpIGFzIEhUTUxFbGVtZW50LFxuICAgICAgICAgICAgICAgIGJ0bk9yZGVyUGx1czogbmV3Um93SHRtbC5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19idG4uX29yZGVyLXBsdXNcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQsXG4gICAgICAgICAgICAgICAgYnRuT3JkZXJNaW51czogbmV3Um93SHRtbC5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19idG4uX29yZGVyLW1pbnVzXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50LFxuICAgICAgICAgICAgICAgIGJ0bkRlbGV0ZTogbmV3Um93SHRtbC5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19idG4uX2RlbGV0ZVwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiBzY2hlbGR1bGVJdGVtXG4gICAgICAgIH0gYXMgUm93O1xuICAgICAgICB0aGlzLnJvd3MucHVzaChuZXdSb3cpO1xuXG4gICAgICAgIG5ldyBJbnB1dEZpbmQ8UHJvZ3JhbT4oXG4gICAgICAgICAgICBuZXdSb3cuaHRtbC5wcm9ncmFtTmFtZUNoYW5nZUVsZW0sXG4gICAgICAgICAgICB0aGlzLnByb2dyYW1zLFxuICAgICAgICAgICAgc2NoZWxkdWxlSXRlbS5wcm9ncmFtLFxuICAgICAgICAgICAgXCJuYW1lXCJcbiAgICAgICAgKTtcbiAgICAgICAgbmV3Um93Lmh0bWwucHJvZ3JhbU5hbWVDaGFuZ2VFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dEZpbmRDaGFuZ2VcIiwgdGhpcy5vblNlbGVjdFByb2dyYW0uYmluZCh0aGlzLCBuZXdSb3cpKTtcbiAgICAgICAgbmV3Um93Lmh0bWwuYnRuRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uRGVsZXRlQnRuQ2xpY2suYmluZCh0aGlzLCBuZXdSb3cpKTtcbiAgICAgICAgbmV3Um93Lmh0bWwuYnRuT3JkZXJQbHVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uT3JkZXJQbHVzQnRuQ2xpY2suYmluZCh0aGlzLCBuZXdSb3cpKTtcbiAgICAgICAgbmV3Um93Lmh0bWwuYnRuT3JkZXJNaW51cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5vbk9yZGVyTWludXNCdG5DbGljay5iaW5kKHRoaXMsIG5ld1JvdykpO1xuICAgIH1cblxuICAgIG9uU2F2ZUJ0bkNsaWNrKCkge1xuICAgICAgICB0aGlzLmh0bWwucm9vdC5jbGFzc0xpc3QucmVtb3ZlKFwiX2NoYW5nZWRcIik7XG4gICAgfVxuICAgIG9uQ2FuY2VsQnRuQ2xpY2soKSB7XG4gICAgICAgIHRoaXMuaHRtbC5yb290LmNsYXNzTGlzdC5yZW1vdmUoXCJfY2hhbmdlZFwiKTtcbiAgICB9XG5cbiAgICBvbkFkZEJ0bkNsaWNrKCkge1xuICAgICAgICB0aGlzLmh0bWwucm9vdC5jbGFzc0xpc3QuYWRkKFwiX2NoYW5nZWRcIik7XG4gICAgICAgIGNvbnN0IG5ld1NoZWxkdWxlSXRlbTogU2NoZWxkdWxlSXRlbSA9IHtcbiAgICAgICAgICAgIGRhdGU6ICtuZXcgRGF0ZSh0aGlzLmh0bWwuZGF0ZUlucHV0LnZhbHVlKSxcbiAgICAgICAgICAgIG9yZGVyOiB0aGlzLnJvd3MubGVuZ3RoICsgMSxcbiAgICAgICAgICAgIHByb2dyYW1faWQ6IG51bGwsXG4gICAgICAgICAgICBwcm9ncmFtOiBudWxsLFxuICAgICAgICAgICAgaWQ6IG51bGxcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjaGVsZHVsZUl0ZW1zLnB1c2gobmV3U2hlbGR1bGVJdGVtKTtcbiAgICAgICAgdGhpcy5hZGRSb3cobmV3U2hlbGR1bGVJdGVtKTtcbiAgICAgICAgdGhpcy5zZXRMYXN0Um93VGltZSgpO1xuICAgICAgICB0aGlzLmh0bWwucm93c0NvbnRhaW5lci5zY3JvbGxUb3AgPSB0aGlzLmh0bWwucm93c0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XG4gICAgfVxuXG4gICAgb25TZWxlY3RQcm9ncmFtKHJvdzogUm93KSB7XG4gICAgICAgIHRoaXMuaHRtbC5yb290LmNsYXNzTGlzdC5hZGQoXCJfY2hhbmdlZFwiKTtcbiAgICAgICAgY29uc3QgbmV3UHJvZ3JhbTogUHJvZ3JhbSA9IChldmVudCBhcyBDdXN0b21FdmVudCkuZGV0YWlsLnZhbHVlO1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMucm93cykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udmFsdWUub3JkZXIgPiByb3cudmFsdWUub3JkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAocm93LnZhbHVlLnByb2dyYW0pIHRoaXMucm93VGltZU1pbnVzKGl0ZW0sIHJvdy52YWx1ZS5wcm9ncmFtLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd1RpbWVQbHVzKGl0ZW0sIG5ld1Byb2dyYW0uZHVyYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJvdy52YWx1ZS5wcm9ncmFtID0gbmV3UHJvZ3JhbTtcbiAgICAgICAgcm93LnZhbHVlLnByb2dyYW1faWQgPSBuZXdQcm9ncmFtLmlkO1xuICAgICAgICByb3cuaHRtbC5wcm9ncmFtRHVyYXRpb25WYWx1ZS5pbm5lclRleHQgPSB0aGlzLmNvbnZlcnREdXJhdGlvbihuZXdQcm9ncmFtLmR1cmF0aW9uKS5zdHI7XG4gICAgfVxuXG4gICAgb25PcmRlclBsdXNCdG5DbGljayhyb3c6IFJvdykge1xuICAgICAgICBjb25zdCByb3dBcnJJZHggPSB0aGlzLnJvd3MuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLnZhbHVlLmlkID09PSByb3cudmFsdWUuaWQpO1xuICAgICAgICBpZiAocm93QXJySWR4IDwgdGhpcy5yb3dzLmxlbmd0aCAtIDIpIHtcbiAgICAgICAgICAgIHJvdy5odG1sLnJvb3QucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUocm93Lmh0bWwucm9vdCwgdGhpcy5yb3dzW3Jvd0FycklkeCArIDJdLmh0bWwucm9vdCk7XG4gICAgICAgIH0gZWxzZSBpZiAocm93QXJySWR4IDwgdGhpcy5yb3dzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHJvdy5odG1sLnJvb3QucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChyb3cuaHRtbC5yb290KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm93QXJySWR4IDwgdGhpcy5yb3dzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMuaHRtbC5yb290LmNsYXNzTGlzdC5hZGQoXCJfY2hhbmdlZFwiKTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRSb3cgPSB0aGlzLnJvd3Nbcm93QXJySWR4ICsgMV07XG4gICAgICAgICAgICB0aGlzLnJvd3Nbcm93QXJySWR4ICsgMV0gPSByb3c7XG4gICAgICAgICAgICB0aGlzLnJvd3Nbcm93QXJySWR4XSA9IG5leHRSb3c7XG4gICAgICAgICAgICByb3cudmFsdWUub3JkZXIrKztcbiAgICAgICAgICAgIG5leHRSb3cudmFsdWUub3JkZXItLTtcbiAgICAgICAgICAgIGlmIChuZXh0Um93LnZhbHVlLnByb2dyYW0pIHRoaXMucm93VGltZVBsdXMocm93LCBuZXh0Um93LnZhbHVlLnByb2dyYW0uZHVyYXRpb24pO1xuICAgICAgICAgICAgaWYgKHJvdy52YWx1ZS5wcm9ncmFtKSB0aGlzLnJvd1RpbWVNaW51cyhuZXh0Um93LCByb3cudmFsdWUucHJvZ3JhbS5kdXJhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk9yZGVyTWludXNCdG5DbGljayhyb3c6IFJvdykge1xuICAgICAgICBjb25zdCByb3dBcnJJZHggPSB0aGlzLnJvd3MuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtID09PSByb3cpO1xuICAgICAgICBpZiAocm93QXJySWR4ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5odG1sLnJvb3QuY2xhc3NMaXN0LmFkZChcIl9jaGFuZ2VkXCIpO1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNSb3cgPSB0aGlzLnJvd3Nbcm93QXJySWR4IC0gMV07XG4gICAgICAgICAgICByb3cuaHRtbC5yb290LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHJvdy5odG1sLnJvb3QsIHByZXZpb3VzUm93Lmh0bWwucm9vdCk7XG4gICAgICAgICAgICB0aGlzLnJvd3Nbcm93QXJySWR4IC0gMV0gPSByb3c7XG4gICAgICAgICAgICB0aGlzLnJvd3Nbcm93QXJySWR4XSA9IHByZXZpb3VzUm93O1xuICAgICAgICAgICAgcm93LnZhbHVlLm9yZGVyLS07XG4gICAgICAgICAgICBwcmV2aW91c1Jvdy52YWx1ZS5vcmRlcisrO1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzUm93LnZhbHVlLnByb2dyYW0pIHRoaXMucm93VGltZU1pbnVzKHJvdywgcHJldmlvdXNSb3cudmFsdWUucHJvZ3JhbS5kdXJhdGlvbik7XG4gICAgICAgICAgICBpZiAocm93LnZhbHVlLnByb2dyYW0pIHRoaXMucm93VGltZVBsdXMocHJldmlvdXNSb3csIHJvdy52YWx1ZS5wcm9ncmFtLmR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uRGVsZXRlQnRuQ2xpY2socm93OiBSb3cpIHtcbiAgICAgICAgaWYgKHJvdy52YWx1ZS5wcm9ncmFtICYmICFjb25maXJtKFwi0KXQvtGA0L7RiNC+INC/0L7QtNGD0LzQsNC70Lg/XCIpKSByZXR1cm47XG4gICAgICAgIHRoaXMuaHRtbC5yb290LmNsYXNzTGlzdC5hZGQoXCJfY2hhbmdlZFwiKTtcbiAgICAgICAgcm93Lmh0bWwucm9vdC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHJvdy5odG1sLnJvb3QpO1xuICAgICAgICB0aGlzLnJvd3Muc3BsaWNlKHRoaXMucm93cy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0gPT09IHJvdyksIDEpO1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMucm93cykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udmFsdWUub3JkZXIgPiByb3cudmFsdWUub3JkZXIpIHtcbiAgICAgICAgICAgICAgICBpdGVtLnZhbHVlLm9yZGVyLS07XG4gICAgICAgICAgICAgICAgaWYgKHJvdy52YWx1ZS5wcm9ncmFtKSB0aGlzLnJvd1RpbWVNaW51cyhpdGVtLCByb3cudmFsdWUucHJvZ3JhbS5kdXJhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb252ZXJ0RHVyYXRpb24oZHVyYXRpb246IG51bWJlcikge1xuICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAzNjAwMDAwKTtcbiAgICAgICAgY29uc3QgbWlucyA9IE1hdGguZmxvb3IoKGR1cmF0aW9uIC0gaG91cnMgKiAzNjAwMDAwKSAvIDYwMDAwKTtcbiAgICAgICAgY29uc3Qgc3RyID0gKGhvdXJzID4gMCA/IGhvdXJzICsgXCLRhy4gXCIgOiBcIlwiKSArIChtaW5zID4gMCB8fCBob3VycyA9PT0gMCA/IG1pbnMgKyBcItC80LjQvS5cIiA6IFwiXCIpO1xuICAgICAgICByZXR1cm4geyBob3VycywgbWlucywgc3RyIH1cbiAgICB9XG5cbiAgICBzZXRBbGxSb3dzVGltZSgpIHtcbiAgICAgICAgY29uc3QgdGltZSA9IHtcbiAgICAgICAgICAgIGhvdXJzOiAwLFxuICAgICAgICAgICAgbWludXRlczogMFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCByb3cgb2YgdGhpcy5yb3dzKSB7XG4gICAgICAgICAgICByb3cuaHRtbC50aW1lVmFsdWUuaW5uZXJUZXh0ID0gYCR7KHRpbWUuaG91cnMgPCAxMCA/IFwiMFwiIDogXCJcIikgKyB0aW1lLmhvdXJzfTokeyh0aW1lLm1pbnV0ZXMgPCAxMCA/IFwiMFwiIDogXCJcIikgKyB0aW1lLm1pbnV0ZXN9YDtcbiAgICAgICAgICAgIHRpbWUubWludXRlcyArPSBNYXRoLnJvdW5kKHJvdy52YWx1ZS5wcm9ncmFtLmR1cmF0aW9uIC8gNjAwMDApO1xuICAgICAgICAgICAgd2hpbGUgKHRpbWUubWludXRlcyA+IDU5KSB7XG4gICAgICAgICAgICAgICAgdGltZS5taW51dGVzIC09IDYwO1xuICAgICAgICAgICAgICAgIHRpbWUuaG91cnMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldExhc3RSb3dUaW1lKCkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1JvdyA9IHRoaXMucm93c1t0aGlzLnJvd3MubGVuZ3RoIC0gMl07XG4gICAgICAgIGNvbnN0IHRpbWVBcnIgPSBwcmV2aW91c1Jvdy5odG1sLnRpbWVWYWx1ZS5pbm5lclRleHQuc3BsaXQoXCI6XCIpO1xuICAgICAgICBjb25zdCB0aW1lID0ge1xuICAgICAgICAgICAgaG91cnM6ICt0aW1lQXJyWzBdLFxuICAgICAgICAgICAgbWludXRlczogK3RpbWVBcnJbMV1cbiAgICAgICAgfTtcbiAgICAgICAgdGltZS5taW51dGVzICs9IE1hdGgucm91bmQoKHByZXZpb3VzUm93LnZhbHVlLnByb2dyYW0gPyBwcmV2aW91c1Jvdy52YWx1ZS5wcm9ncmFtLmR1cmF0aW9uIDogMCkgLyA2MDAwMCk7XG4gICAgICAgIHdoaWxlICh0aW1lLm1pbnV0ZXMgPiA1OSkge1xuICAgICAgICAgICAgdGltZS5taW51dGVzIC09IDYwO1xuICAgICAgICAgICAgdGltZS5ob3VycysrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm93c1t0aGlzLnJvd3MubGVuZ3RoIC0gMV0uaHRtbC50aW1lVmFsdWUuaW5uZXJUZXh0ID0gYCR7KHRpbWUuaG91cnMgPCAxMCA/IFwiMFwiIDogXCJcIikgKyB0aW1lLmhvdXJzfTokeyh0aW1lLm1pbnV0ZXMgPCAxMCA/IFwiMFwiIDogXCJcIikgKyB0aW1lLm1pbnV0ZXN9YDtcbiAgICB9XG5cbiAgICByb3dUaW1lUGx1cyhyb3c6IFJvdywgZHVyYXRpb246IG51bWJlcikge1xuICAgICAgICBjb25zdCB0aW1lQXJyID0gcm93Lmh0bWwudGltZVZhbHVlLmlubmVyVGV4dC5zcGxpdChcIjpcIik7XG4gICAgICAgIGNvbnN0IHRpbWUgPSB7XG4gICAgICAgICAgICBob3VyczogK3RpbWVBcnJbMF0sXG4gICAgICAgICAgICBtaW51dGVzOiArdGltZUFyclsxXVxuICAgICAgICB9O1xuICAgICAgICB0aW1lLm1pbnV0ZXMgKz0gTWF0aC5yb3VuZChkdXJhdGlvbiAvIDYwMDAwKTtcbiAgICAgICAgd2hpbGUgKHRpbWUubWludXRlcyA+IDU5KSB7XG4gICAgICAgICAgICB0aW1lLm1pbnV0ZXMgLT0gNjA7XG4gICAgICAgICAgICB0aW1lLmhvdXJzKys7XG4gICAgICAgIH1cbiAgICAgICAgcm93Lmh0bWwudGltZVZhbHVlLmlubmVyVGV4dCA9IGAkeyh0aW1lLmhvdXJzIDwgMTAgPyBcIjBcIiA6IFwiXCIpICsgdGltZS5ob3Vyc306JHsodGltZS5taW51dGVzIDwgMTAgPyBcIjBcIiA6IFwiXCIpICsgdGltZS5taW51dGVzfWA7XG4gICAgfVxuXG4gICAgcm93VGltZU1pbnVzKHJvdzogUm93LCBkdXJhdGlvbjogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHRpbWVBcnIgPSByb3cuaHRtbC50aW1lVmFsdWUuaW5uZXJUZXh0LnNwbGl0KFwiOlwiKTtcbiAgICAgICAgY29uc3QgdGltZSA9IHtcbiAgICAgICAgICAgIGhvdXJzOiArdGltZUFyclswXSxcbiAgICAgICAgICAgIG1pbnV0ZXM6ICt0aW1lQXJyWzFdXG4gICAgICAgIH07XG4gICAgICAgIHRpbWUubWludXRlcyAtPSBNYXRoLnJvdW5kKGR1cmF0aW9uIC8gNjAwMDApO1xuICAgICAgICB3aGlsZSAodGltZS5taW51dGVzIDwgMCkge1xuICAgICAgICAgICAgdGltZS5taW51dGVzICs9IDYwO1xuICAgICAgICAgICAgdGltZS5ob3Vycy0tO1xuICAgICAgICB9XG4gICAgICAgIHJvdy5odG1sLnRpbWVWYWx1ZS5pbm5lclRleHQgPSBgJHsodGltZS5ob3VycyA8IDEwID8gXCIwXCIgOiBcIlwiKSArIHRpbWUuaG91cnN9OiR7KHRpbWUubWludXRlcyA8IDEwID8gXCIwXCIgOiBcIlwiKSArIHRpbWUubWludXRlc31gO1xuICAgIH1cbn1cblxubmV3IFNjaGVsZHVsZVBhZ2UoKTtcblxuY2xhc3MgU2NoZWxkdWxlSXRlbSB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBkYXRlOiBudW1iZXI7XG4gICAgb3JkZXI6IG51bWJlcjtcbiAgICBwcm9ncmFtX2lkOiBudW1iZXI7XG4gICAgcHJvZ3JhbT86IFByb2dyYW07XG59XG5cbmNsYXNzIFByb2dyYW0ge1xuICAgIGlkOiBudW1iZXI7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGR1cmF0aW9uOiBudW1iZXI7XG4gICAgbGluazogc3RyaW5nO1xufVxuXG5jbGFzcyBSb3cge1xuICAgIGh0bWw6IHtcbiAgICAgICAgcm9vdDogSFRNTEVsZW1lbnQ7XG4gICAgICAgIHRpbWVWYWx1ZTogSFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb2dyYW1OYW1lQ2hhbmdlRWxlbTogSFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb2dyYW1EdXJhdGlvblZhbHVlOiBIVE1MRWxlbWVudDtcbiAgICAgICAgYnRuT3JkZXJQbHVzOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgYnRuT3JkZXJNaW51czogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIGJ0bkRlbGV0ZTogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgfTtcbiAgICB2YWx1ZTogU2NoZWxkdWxlSXRlbTtcbn0iXSwic291cmNlUm9vdCI6IiJ9